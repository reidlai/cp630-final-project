<h1 id="project-report">PROJECT Report</h1>
<p>Author: Wai Kei LAI</p>
<p>Date: 2024-10-10</p>
<p>Check <a href="readme.txt">readme.txt</a> for course work statement
and self-evaluation.</p>
<h2 id="r1-requirements-project">R1 Requirements (project)</h2>
<h3 id="r1-write-a-project-proposal-2-3-pages.">R1 Write a project
proposal (2-3 pages).</h3>
<p>Complete? (Yes/No) Yes</p>
<p>If Yes, briefly describe:</p>
<ol class="incremental" type="1">
<li>what you have done,</li>
<li>what are the new features.</li>
<li>Take some screen to demonstrate the features if applicable.</li>
</ol>
<h4 id="introduction">Introduction</h4>
<p>In the period of advancement of technology and financial development,
there has been a drastic increase in such activities as credit card
payments, banking, online fund transactions and others as a result of
the expansion of information technology. While this increase in
financial activities has made capital and resource deployment to be more
effective, it has also exactly led to the increase of fraudulent
activities. Because of the arising complexity of the fraudulent
transaction, its defenders fall behind the old solutions and seek for
advanced means for counterfeiting and fraud deterrence.</p>
<p>Option Consommateurs (2024) published a report which showed that
around 30% of the Canadians remember themselves being a victim of the
bank fraud. In fact, among those who felt the effects of bank fraud,
almost 25% have taken some measure to defend themselves after the
incident. This indicates that the aftermath of such kinds of fraud is
not only loss of money but also loss of peace of mind, and victims
become more vigilant on the security of their assets.</p>
<p>Fraud is a common phenomenon in the financial arena. Credit card
fraud, banker cheque fraud, and EFT fraud and all of them pose great
risk to the financial institution and its clients. This misuse of
information or financial assets is caused by scam or dishonest persons
with serious consequences to economies and the security of consumers. As
a result, the issue of fraud transactions which has become common in
financial transactions needs to be cured fairly very quickly by all
concerned parties in this case the financial institutions.</p>
<p>The classical approaches which have been adopted by many of the
companies whereby the review of transactions are being done on manual
basis and most times more rules limits systems, is becoming more
obsolete not because such systems are not in existence but because the
fraud depots have become more advanced in their tactics. The procedures
are very time consuming and require a lot of manpower and barely keeps
pace with the development of the changes of the type of fraud.
Therefore, new technologies for detection and measures to prevent fraud
are needed which will be able to provide performance and flexibility in
the timely and seamless detection of unauthorized activities.</p>
<h4 id="problem-solving-and-algorithms">Problem Solving and
Algorithms</h4>
<p>Over the past few years, ‘machine learning’ techniques have developed
as one of the recent technologies for solving problems related to fraud
detection in financial transactions. Before applying any model, it is
understood that using machine learning requires a large volume of data
which comprises past activities connected with fraud and instigates
models to recognize them efficiently. Such models can also be designed
using historical data on transactions and will keep getting better as
additional data will continue becoming available.</p>
<p>In response to this pressing issue, various machine learning
techniques have been proposed for fraud detection. One such technique
involves the use of LightGBM for Credit Card Fraud Detection (Huang,
2020). This innovative approach to fraud detection could potentially be
applied to our project, offering a promising solution to this pervasive
problem with supporting research by Du et al. (2023).</p>
<p>The primary objective of this project lies in identifying the
suitable Proof of Concept within the appropriate context and testing the
model based approach in the financial market using machine learning
methods. The solution will include the use of the Kaggle Dataset
ealtman2019/credit-card-transactions as it is based on the publication
of Altman, E (2019). A number of elements may be identified as being
part of this issue and the answer.</p>
<ol class="incremental" type="1">
<li><strong>Dataset Acquisition</strong>: For the purpose of obtaining
the dataset from Kaggle It is necessary to have a web UI as the AI
Engineers will find it more convenient to fetch the required dataset
from the UI.</li>
<li><strong>Data Review and Mapping</strong>: Up to this point, the
dataset is in the AI Engineer’s hands, so the schema of the dataset will
be examined by the AI Engineer. An editor will be required in order to
ease this occasion. Such tool will also allow artificial intelligence
engineers’ simple data mapping on different dataset file format that are
part of the dataset. They can also find pertinent attributes in the data
and map them to their functions as well. Eventually, such mapping will
support data understanding and also form part of the data to be fed into
the machine learning training and development. This visual tool will
improve the process of reviewing data and also ensure that the AI model
uses the important components.</li>
<li><strong>AI Model Development</strong>: The final step is the
deployment of the ONNX model derived from the well trained AI model
developed at the final stages of the training and testing
processes.</li>
<li><strong>Transaction Validation</strong>: To trigger the validation
step, a payment gateway facing Payment Order API is being developed
which will integrate with Payment Processing backend service. This
particular service will leverage another machine learning inference
background service which loads the AI model for fraud detection. If a
transaction is suspected to be fraudulent then the transaction will be
put on pending and security officer needs a UI which can review the
pending transaction when receiving customer’s enquiry.</li>
<li><strong>Notification of Customer</strong>: Also if the transaction
is recognized as a potentially fraudulent one, the customer will be sent
an email about the potential fraud and further security check
process.</li>
</ol>
<h5 id="conceptual-design">Conceptual Design</h5>
<h6 id="context-diagram">Context Diagram</h6>
<p>This project is going to use C4 model developed by Brown (2023) to
break down the whole idea and visualize overall conceptual design.</p>
<figure>
<img src="images/context_diagram.png" alt="" style="width: 30%;" />
<figcaption>
Figure 1 - C4 Context Diagram
</figcaption>
</figure>
<p>Figure 1 illustrates the interactions between customer and the
Payment Solution with Fraud Detection using AI. This setup not only
facilitates efficient fraud detection automation but also supports to
customer about their credit card payment. The platform’s capabilities
allow for better resource management, enabling financial institution to
optimize internal resource efficiency and improve overall customer
satisfaction from security perspective.</p>
<h6 id="container-diagram">Container Diagram</h6>
<figure>
<img src="images/container_diagram.png" alt="" style="width: 50%;" />
<figcaption>
Figure 2 - C4 Container Diagram
</figcaption>
</figure>
<p>In Figure 2, the system is subdivided into several vital containers
as follows:</p>
<ol class="incremental" type="1">
<li><strong>Data Processing</strong>: AI Engineer needs to prepare
datasets for ML model training and testing and extracted data will be
upload to database serving payment request feature mapping when
receiving fraud detection request service.</li>
<li><strong>Payment Request Store</strong>: This relational database
store gets to store payment requests and payment request status.</li>
<li><strong>MLOps Pipeline</strong>: This is a very important container
whereby information mapping from dataset to database table, data
clean-up, feature engineering, model training and testing take
place.</li>
<li><strong>Machine Learning Model</strong>: This is LightGBM model
mentioned by Huang (2020).</li>
<li><strong>Payment Processing Service</strong>: This is public facing
service that expose to payment gateway and response for the processing
of payments from merchants who made the Payment request.</li>
<li><strong>Machine Learning Inference Service</strong>: This services
mainly serve all fraud detection request against incoming payment
request. It will get and use machine learning model to identify any
possible frauds.</li>
<li><strong>Payment Notification Service</strong>: This service sends
email alerts to customers if the transaction is successful or on hold if
potential fraud detected.</li>
<li><strong>Payment Request Portal (Fraud Detection Portal):</strong>
This UI targets to serve security office to manage payment request,
especially those with fraud detected by Machine Learning Inference
Service.</li>
</ol>
<h6 id="business-events-and-workflow">Business Events and Workflow</h6>
<figure>
<img src="images/workflow.png" alt="" style="width: 50%;" />
<figcaption>
Figure 3 - BPMN Model
</figcaption>
</figure>
<p>In this session, BPMN (n.d.) is used to illustrate how alll business
process orchestrates together to deliver fraud detection solution. BPMN
standardizes the way in which the business processes are represented in
a diagrammatic way, thereby making the description of the workflow
system less cumbersome. It allows the readers to depict accurately the
position of tasks, deadlines, events, decision points, and the
interactions among people and parts of the system. This means that it
can improve partnership and coordination among business analysts,
developers as well as system end users.</p>
<table>
<tr>
<th>
BPMN Lane
</th>
<th>
Business Event
</th>
<th>
Description
</th>
</tr>
<tr>
<td>
Fraud Detection Portal
</td>
<td>
Customer callback to query about on-hold transaction
</td>
<td>
Security Officer will use this UI to query on-hold transaction and
change the status from “on-hold” to “proceed” after review.
</td>
</tr>
<tr>
<td>
Payment Processing Service
</td>
<td>
Make payment request
</td>
<td>
Payment processing is initiated by external payment gateway when
merchant submit payment request to financial insituition.
</td>
</tr>
<tr>
<td>
Machine Learning Inference Service
</td>
<td>
Request fraud detection service
</td>
<td>
The Payment Processing Service uses the Model Inference Service to
identify the chances of Fraud in the Payment Request using a ML Model
deployed by the system.
</td>
</tr>
<tr>
<td>
Payment Notification Service
</td>
<td>
Update payment transaction status
</td>
<td>
When receiving notification request from Payment Processing Service,
this service will retrieve customer name and email address, render the
final email using email template, and send to SMTP server using SMTP
Relay Service.
</td>
</tr>
<caption style="caption-side:bottom">
Table 1 - Business Process Lanes
</caption>
</table>
<p><h7>Payment Processing Service</h7></p>
<figure>
<img src="images/payment_processing_component_diagram.png" alt="" style="width: 30%;">
<figcaption>
Figure 4 - Payment Processing Service Component Diagram
</figcaption>
</figure>
<p>As it can be seen in Figure 4, the Payment Processing Service, as
part of the transversal functions within the Credit Card Fraud Detection
Solution, allows receiving payment requests while avoiding the risks .
Figure 4 shows how it contains several components that ensure that
payments are made seamlessly.</p>
<p>Payment Gateway sends Payment Request and a REST Controller initiates
a service that is the first in the payment request chain. This
controller’s responsibility is to implement the workflow which consists
of initiating the fraudulent detection of the payment and payment data
management. In order to check if there is possible fraudulent abuse, the
Payment Request Controller sends the request, which contains data, to
the Model Inference service. Data comes back to this service which in
turn has some actionable data which the controller considers some its
relevant data and asleep out. When all operations have been performed to
check the fraudulent abuse then Model Inference Service makes any
necessary modification updates for the fraud detection.</p>
<p>The Payment Request REST Controller certainly does an extra job, it
validates that there exists a payment request concerning the payment
which is somewhere in the system. It connects with the database client
and ensures that the request on payment is recorded in the Payment
Request Store, which is a live payment application service. This ensures
therefore that all the information regarding the payment is captured and
can be retrieved for use or for record purposes.</p>
<p>Once generally evaluated and the payment request status is updated,
it is efficiently transmitted the statsus back to external payment
gateway. This client calls the payment gateway callback interface.</p>
<p><h7>Machine Learning Inference Service</h7></p>
<figure>
<img src="images/model_inference_component_diagram.png" alt="" style="width: 30%;">
<figcaption>
Figure 4 - Model Inference Service Component Diagram
</figcaption>
</figure>
<p>The Model Inference Service is an important part of the Credit Card
Fraud Detection Service and is aimed at preventing fraud attempts in a
payment order. It serves as the link between the Payment Processing
Service and the fraud detection machine learning model. This service
makes sure that every payment order has passed through the fraud
assessment, and the outcome has been returned to the concerned
stakeholders.</p>
<p>The service initiates its workflow through the Service Request
Handler, which deals with incoming requests from the Payment Processing
Service. In case a service request is raised for the purpose of fraud
detection, the Service Request Handler takes the charge and sends the
request to the Model Inference Engine. The Model Inference Engine is the
single engine of the service, which runs the machine learning model
using payment data as the input. It engages in a working relationship
with the Machine Learning Model that has been uploaded with algorithms
and the relevant data to display trends of suspiciousness in the payment
requests.</p>
<p>When the fraud detection i.e. review procedure ends, it generates a
result indicating whether there exists a chance of the current
transaction being fraudulent rather than normal. This result is then
routed back to the Payment Processing Service in order to bring level of
fraud detection of the corresponding payment request to the appropriate
level. Furthermore, the request handler also performs the function of
informing interested parties in the state of the payment through the
payment notification service in order to ensure that the result of the
fraud detection process is indeed notified.</p>
<p><h7>Payment Notification Backend Service</h7></p>
<figure>
<img src="images/payment_notification_component_diagram.png" alt="" style="width: 30%;">
<figcaption>
Figure 4 - Payment Notification Service Compoent Diagram
</figcaption>
</figure>
<p>The Payment Notification Service acts as a communicating channel for
reliable and secure intercourse of information between the system, and
the customers. The main objective of this service is to provide
information to clients about incoming payment requests especially those
assessed to be suspicious.</p>
<p>This service in its implementation is quite professional and is
designed to be secure against tampering. The request handler only
considers the customer ID as the needed parameter. After that the
handler fetches the customer’s name and email address which does not
compromise personal information and minimizes data breaches.</p>
<p>In addition the service uses the official company email or its
variations that were previously constructed for all the purposes of
correspondence. Such an approach guarantees orthodoxy and uniformity of
the messages as well as the self-defense of the corporation from
delictous phrases. Thus, the Payment Notification Service assists to
secure the system and at the same time enables great communication with
the clients.</p>
<p>If customers concern their on-hold payment if potential fraud
detected, they need to approach security officer for further
verificaition and special handling.</p>
<h5 id="proposed-technical-stack">Proposed Technical Stack</h5>
<p>The given technical stack utilizes commonly used or well known
technologies and frameworks thus making it secure and easily adaptable
to changes. The payment solution with fraud detection based on machine
learning relies on the combination of Spring Boot as backend, Svelte as
frontend, Mage.AI for MLOps, PostgreSQL for data storage, Minio for
object storage, Docker for virtual technology and LightGBM as algorithm
for dynamic fraud detection in payments.</p>
<p>Due to limited project timeline and PoC purpose, the following
technical components ddi not include in this phase:</p>
<ul class="incremental">
<li>API Gateway (proposed: Kong API Gateway or Hashicorp Consul
Connect)</li>
<li>Authentication and Authorization (proposed: Casdoor and Casbin)</li>
<li>HTTP Proxy (proposed: Caddy reverse proxy with Casdoor and Casbin
integration)</li>
<li>Message Bus (proposed: Kafka compatible project or NATS
messaging)</li>
</ul>
<h3
id="r2-design-data-format-collect-data-create-dataset-for-the-application.">R2
Design data format, collect data, create dataset for the
application.</h3>
<p>Complete? (Yes/No) Yes</p>
<p>If Yes, briefly describe:</p>
<ol class="incremental" type="1">
<li>what you have done,</li>
<li>what are the new features.</li>
<li>Take some screen to demonstrate the features if applicable.</li>
</ol>
<h4 id="dataset-acquisition"><strong>Dataset Acquisition</strong></h4>
<p>The real-world application problem is reinforced with great emphasis
to the web UI component of the AI business model as it enables the
engineers to satisfactorily cope with the data acquisition element
within the strict time boundaries of the project. In the fast pacing
technology space today, <a href="http://mage.ai/">Mage.ai</a> happens to
be one of the best codeless MLOps tools. It has a clear competitive
advantage due to its architecture allowing the incorporation of Singer
specification datasources connectors. This incorporation enables the
performance of routine ETL activities and operation time tabling, which
in turn improves the workflow performance.</p>
<figure>
<img src="images/mageai_dashboard.png" alt="" style="width: 90%;">
<figcaption>
Figure 5 - Mage.ai Dashboard
</figcaption>
</figure>
<figure>
<img src="images/data_processing_pipeline.png" alt="" style="width: 90%;">
<figcaption>
Figure 6 - Data Processing Pipeline
</figcaption>
</figure>
<figure>
<img src="images/data_processing_pipeline_trigger.png" alt="" style="width: 90%;">
<figcaption>
Figure 7 - Data Processing Pipeline Trigger
</figcaption>
</figure>
<figure>
<img src="images/data_processing_pipeline_source.png" alt="" style="width: 90%;">
<figcaption>
Figure 8 - Data Processing Pipeline Editor
</figcaption>
</figure>
<p>As for Figures 5 to 8, these Figures demonstrated how the entire
pipeline (which is batched ETL) functioning was performed to migrate
Altman’s data set (2019) into PostgresSQL 16 and Apache Parquet File in
MinIO object storage. The full source code of Mage.ai is available in
project/data-processing.</p>
<h5 id="huge-data-volume"><strong>Huge Data Volume</strong></h5>
<p>The descriptive analysis of Altman’s data set (2019) notes inferring
transactional dataset, which is noted to be a vast dataset that
comprises approximately 2.5 million transaction records. It resulted in
serious performance degradation when employing standard pandas’s
dataframe which is the building core of context data framework used by
Mage.ai. Though, this problem was ultimately fixed by the usage of
rust-based Polars dataframe library including its astonishing copying
technology and csv batch reader’s specialized ability.</p>
<h5 id="minio-as-archive-storage">Minio as archive storage</h5>
<p>Minio plays a crucial role in the acquisition of Kaggle dataset. As
an open-source, high-performance, Amazon S3 compatible object storage
system, Minio provides us with a simple and cost-effective way to store
and serve the massive amounts of data required for our project. Its
compatibility with Amazon S3 allows us to leverage the robustness and
reliability of Amazon’s storage infrastructure, while its open-source
nature gives us the flexibility to customize and optimize it to suit our
specific needs.</p>
<p>In the MLOps pipeline, Minio serves as archive storage at this
current stage. But I believe Minio can be used as the primary object
storage system to feed in model training and testing process with
integration with Polars in the next release. It efficiently stores and
retrieves large volumes of data with multiple batches or data chunk,
which is essential for large data volume loading. The scalability and
security of Minio also ensure that our data is safe and accessible, even
as the volume of data grows.</p>
<figure>
<img src="images/mino_login.png" alt="" style="width: 90%;">
<figcaption>
Figure 9 - MinIO Login
</figcaption>
</figure>
<figure>
&lt;img src=“images/minio_bucket.png” alt=” style=“width: 90%;”“&gt;
<figcaption>
Figure 10 - MinIO Bucket
</figcaption>
</figure>
<figure>
<img src="images/minio_object_list.png" alt="" style="width: 90%;">
<figcaption>
Figure 11 - MinIO Bucket Object List
</figcaption>
</figure>
<h5 id="polars">Polars</h5>
<p>The reason I prefer Polars instead of Pandas is mainly due to its
batch reading functionalities. This feature enables us to read in large
quantities of data quickly, which is what we need for this project since
we are working with a big dataset from Kaggle that contains past
activity data connected with fraud. Besides, if we would use Pandas,
dealing with those enormous datasets is not likely to be quite as simple
since it appears that this library has limitations with respect to
memory management for huge datasets.</p>
<p>Polars has another interesting aspect its support for lazy execution.
This means that computations are only done if necessary, resulting in
much better performance especially for large datasets. On the other
hand, with Pandas, all the computations are done at once, May be at the
expense of slower processing time and increased memory usage.</p>
<p>Polars also allows for data manipulation operations such as
filtering, aggregation or sorting, and supports multiple data types
including integer, float and boolean, date, time and string. All of
these make it a multifunctional instrument for working with and
analyzing data essential in us for the data processing pipeline.</p>
<pre><code># Python file txn_data_csv.py
...
# Create batch reader and batches from Kaggle dataset
reader = pl.read_csv_batched(file_path + &quot;/&quot; + file_name)
batches = reader.next_batches(10000)

# Create mion client
client = Minio(
    endpoint=minio_endpoint,
    access_key=minio_access_key,
    secret_key=minio_secret_key,
    secure=False
)

# Loop batches
for df in batches:
    # Remaining code
...</code></pre>
<h3
id="r3-develop-and-implement-data-application-algorithms-for-the-proposed-application-problem.">R3
Develop and implement data application algorithms for the proposed
application problem.</h3>
<p>Complete? (Yes/No) Yes</p>
<p>If Yes, briefly describe:</p>
<ol class="incremental" type="1">
<li>what you have done,</li>
<li>what are the new features.</li>
<li>Take some screen to demonstrate the features if applicable.</li>
</ol>
<h4 id="mlops-pipeline">MLOps Pipeline</h4>
<p><a href="http://mage.ai/">Mage.ai</a> in its full extent is an
important utility in the data science armamentarium especially for data
cleaning and feature engineering. <a
href="http://mage.ai/">Mage.ai</a>’s clean user interface and rich set
of features make waves in what is usually recurrently the most boring
and tedious work that is data preparation and data transformation.
Still, as far as this project is concerned, which was limited to a
quarter’s period, the use of Jupyter Notebooks turned out to be a more
appropriate option. Interactively, Jupyter notebooks provide a
comprehensive platform by allowing code, visualizations and written text
to be presented and run in the afterthought. As a result of this, the
team was able to iterate faster, collaborate more effectively, and
deliver the project in the specified time.</p>
<h5 id="run-data-pipeline-in-jupyter">Run Data Pipeline in Jupyter</h5>
<p>The data pipeline consists of four distinct stages - Data Processing,
Data Profiling, Data Cleansing and Feature Engineering.</p>
<figure>
<img src="images/data_pipeline_concept.png" alt="" style="width: 50%;">
<figcaption>
Figure 12 - Data Pipeline Concept
</figcaption>
</figure>
<p>The first stage is the raw data acquisition or data processing and
formats the data into a form that can be used for subsequent analysis.
The second stage is data profiling which involves examining the
structure of the data set for possible errors and exploration of
patterns within the values of the data. After profiling data comes the
third step that involves imputation or the removal of outliers also
known as data cleansing which is done to improve the quality of results
that will be obtained from the latter analyses. The conclusion of this
step is the creation of combined variables by engineering which improves
the representation of the data for the learning algorithm.</p>
<h5 id="data-processing">Data Processing</h5>
<p>The dataset has been brought to PosgresSQL database and MinIO object
storage, this section shall pass on data processing implementation
details. Please find all details in the above section “Dataset
Acquisition”. Alliances views the data volume perspective of her file,
credit_card_transactions-ibm_v2.csv as report with a size of 2.35GB.
This figure is too huge for machine learning.</p>
<h6 id="database">Database</h6>
<p>We sought to execute a query on the data for the database table
transactions so as to comprehend the distribution pattern of the data. A
total of 3281 fraud transactions were discovered in the year 2015 and
3579 records in the year 2016. The total number of records in both years
is 3410295. This volume appears satisfactory to create the data
model.</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">EXTRACT</span>(<span class="dt">YEAR</span> <span class="kw">FROM</span> transaction_datetime) <span class="kw">AS</span> transaction_year,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  fraud_detected,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">COUNT</span>(<span class="op">*</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  transactions</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> </span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  transaction_year, fraud_detected</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> </span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  transaction_year, fraud_detected;</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>Output </span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="op">======</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;transaction_year&quot;</span>,<span class="ot">&quot;fraud_detected&quot;</span>,<span class="ot">&quot;count&quot;</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;1991&quot;</span>,<span class="kw">False</span>,<span class="ot">&quot;1585&quot;</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;1992&quot;</span>,<span class="kw">False</span>,<span class="ot">&quot;5134&quot;</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;1993&quot;</span>,<span class="kw">False</span>,<span class="ot">&quot;8378&quot;</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;1994&quot;</span>,<span class="kw">False</span>,<span class="ot">&quot;14316&quot;</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;1995&quot;</span>,<span class="kw">False</span>,<span class="ot">&quot;20928&quot;</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;1996&quot;</span>,<span class="kw">False</span>,<span class="ot">&quot;29935&quot;</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;1996&quot;</span>,<span class="kw">True</span>,<span class="ot">&quot;10&quot;</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;1997&quot;</span>,<span class="kw">False</span>,<span class="ot">&quot;49721&quot;</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;1997&quot;</span>,<span class="kw">True</span>,<span class="ot">&quot;32&quot;</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;1998&quot;</span>,<span class="kw">False</span>,<span class="ot">&quot;78313&quot;</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;1998&quot;</span>,<span class="kw">True</span>,<span class="ot">&quot;32&quot;</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;1999&quot;</span>,<span class="kw">False</span>,<span class="ot">&quot;118226&quot;</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;1999&quot;</span>,<span class="kw">True</span>,<span class="ot">&quot;24&quot;</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2000&quot;</span>,<span class="kw">False</span>,<span class="ot">&quot;177558&quot;</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2000&quot;</span>,<span class="kw">True</span>,<span class="ot">&quot;171&quot;</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2001&quot;</span>,<span class="kw">False</span>,<span class="ot">&quot;257644&quot;</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2001&quot;</span>,<span class="kw">True</span>,<span class="ot">&quot;354&quot;</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2002&quot;</span>,<span class="kw">False</span>,<span class="ot">&quot;350593&quot;</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2002&quot;</span>,<span class="kw">True</span>,<span class="ot">&quot;139&quot;</span></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2003&quot;</span>,<span class="kw">False</span>,<span class="ot">&quot;466097&quot;</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2003&quot;</span>,<span class="kw">True</span>,<span class="ot">&quot;311&quot;</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2004&quot;</span>,<span class="kw">False</span>,<span class="ot">&quot;596383&quot;</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2004&quot;</span>,<span class="kw">True</span>,<span class="ot">&quot;620&quot;</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2005&quot;</span>,<span class="kw">False</span>,<span class="ot">&quot;746424&quot;</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2005&quot;</span>,<span class="kw">True</span>,<span class="ot">&quot;229&quot;</span></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2006&quot;</span>,<span class="kw">False</span>,<span class="ot">&quot;907675&quot;</span></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2006&quot;</span>,<span class="kw">True</span>,<span class="ot">&quot;1118&quot;</span></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2007&quot;</span>,<span class="kw">False</span>,<span class="ot">&quot;1062602&quot;</span></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2007&quot;</span>,<span class="kw">True</span>,<span class="ot">&quot;1881&quot;</span></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2008&quot;</span>,<span class="kw">False</span>,<span class="ot">&quot;1219750&quot;</span></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2008&quot;</span>,<span class="kw">True</span>,<span class="ot">&quot;3710&quot;</span></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2009&quot;</span>,<span class="kw">False</span>,<span class="ot">&quot;1354294&quot;</span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2009&quot;</span>,<span class="kw">True</span>,<span class="ot">&quot;1140&quot;</span></span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2010&quot;</span>,<span class="kw">False</span>,<span class="ot">&quot;1487390&quot;</span></span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2010&quot;</span>,<span class="kw">True</span>,<span class="ot">&quot;3835&quot;</span></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2011&quot;</span>,<span class="kw">False</span>,<span class="ot">&quot;1570496&quot;</span></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2011&quot;</span>,<span class="kw">True</span>,<span class="ot">&quot;55&quot;</span></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2012&quot;</span>,<span class="kw">False</span>,<span class="ot">&quot;1609496&quot;</span></span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2012&quot;</span>,<span class="kw">True</span>,<span class="ot">&quot;1333&quot;</span></span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2013&quot;</span>,<span class="kw">False</span>,<span class="ot">&quot;1648899&quot;</span></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2013&quot;</span>,<span class="kw">True</span>,<span class="ot">&quot;2018&quot;</span></span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2014&quot;</span>,<span class="kw">False</span>,<span class="ot">&quot;1671291&quot;</span></span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2014&quot;</span>,<span class="kw">True</span>,<span class="ot">&quot;1052&quot;</span></span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2015&quot;</span>,<span class="kw">False</span>,<span class="ot">&quot;1698090&quot;</span></span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2015&quot;</span>,<span class="kw">True</span>,<span class="ot">&quot;3281&quot;</span></span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2016&quot;</span>,<span class="kw">False</span>,<span class="ot">&quot;1705345&quot;</span></span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2016&quot;</span>,<span class="kw">True</span>,<span class="ot">&quot;3579&quot;</span></span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2017&quot;</span>,<span class="kw">False</span>,<span class="ot">&quot;1723105&quot;</span></span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2017&quot;</span>,<span class="kw">True</span>,<span class="ot">&quot;255&quot;</span></span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2018&quot;</span>,<span class="kw">False</span>,<span class="ot">&quot;1719124&quot;</span></span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2018&quot;</span>,<span class="kw">True</span>,<span class="ot">&quot;2491&quot;</span></span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2019&quot;</span>,<span class="kw">False</span>,<span class="ot">&quot;1721851&quot;</span></span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2019&quot;</span>,<span class="kw">True</span>,<span class="ot">&quot;2087&quot;</span></span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;2020&quot;</span>,<span class="kw">False</span>,<span class="ot">&quot;336500&quot;</span></span></code></pre></div>
<p>In the jupyter notebook
<strong><project_root>/project/mlops_pipeline/mlops_pipeline.ipynb</strong>,
query joining customers, cards, transacations load data set between
January 2015 and Dec 2016. In order to reduce newtork traffic and rerun
data pipeline from step if crash happened. Parquet file format was used
to keep dataframe in disk persistence for checkpoint puprose.</p>
<h5 id="data-profiling"><strong>Data Profiling</strong></h5>
<p>Data profiling is a technique used to observe the data distribution
of each feature. It provides an overview of the data by providing
information about min/max values, mean, null or infinite values, and
count. This helps us to identify any outliers in our dataset which can
then be removed through data cleansing techniques. Data profiling serves
as an important starting point for further analysis and understanding
what type of cleaning might be required for our dataset before we move
on with other tasks like machine learning models building.</p>
<p>Exploratory Data Analysis (EDA) is a ground-breaking book in the
field of data analysis. It introduces and explains the principles of
exploratory data analysis, which involves analyzing datasets to
summarize their main characteristics using statistical graphics and
other visualization methods (Turkey, 1997).</p>
<p>EDA framework helps describe a set of data features, expose its inner
structure, get out important variables, identify any anomalies and
outliers and test for the underlying assumptions. Here are some problems
that may be discovered in an EDA report:</p>
<ul class="incremental">
<li><strong>Missing Values</strong> - By using EDA it is possible to
find columns with missing values. In this regard, you will probably
replace or rather remove them depending on what proportion of values
were not found.</li>
<li><strong>Outliers</strong> - In case there are outliers in your data,
performing EDA can help you to detec them. Such cases differ greatly
from other observations. These strange values might be true or
erroneous.</li>
<li><strong>Distribution of Data</strong> - When one does exploratory
analysis of data, he/she can understand its distribution too well. If
it’s skewed, then it might not work as expected by some machine learning
algorithms.</li>
<li><strong>Correlation</strong> - Furthermore, through conducting EDA
on your dataset you can also determine if there are any correlated
features among them which will lead multicollinearity among linear
regression models if they have highly correlated features.</li>
<li><strong>Constant Features</strong> - Moreover, one may equally use
this step to determine if there are any constant features in dataset
that lacks useful information hence, they need to be deleted as
well.</li>
<li><strong>Categorical Variables</strong> - Additionally, when engaged
in exploratory analysis of data one may also find out how many
categorical variables exist and their distinct categories too since a
few categories might have minimal counts thus requiring special
treatment separately.</li>
<li><strong>Feature Magnitude</strong> - Furthermore another thing that
comes into the picture during EDA is whether the different measures are
being used for scaling features for such algorithms like learning
machines where scale needs to be uniform across all these arrays.</li>
</ul>
<p>YData Proflding API was adopted to provide quick EDA Analysis into
preliminary features and labels within a dataset before any further ML
tasks are undertaken. Detail EDA report can be found at
<strong><project_root>/project/mlops_pipeline/data/ydata_reports/initial_eda_report.html</strong>.</p>
<figure>
<img src="images/initial_eda_analysis.png" alt="" style="width: 90%;">
<figcaption>
Figure 13 - Initial EDA Analysis
</figcaption>
</figure>
<h5 id="data-cleansing">Data Cleansing</h5>
<p>Data Cleansing stage handles missing values, outliers, feature
engineering, etc. This could involve techniques such as imputation or
removal of instances with missing values, depending on the proportion of
missing data and the specific requirements of your analysis or
model.</p>
<p>A strategic change is being introduced in our data processing
pipeline to ensure efficiency and coherence. We will merge Exploratory
Data Analysis (EDA) with the data cleaning step. As a result, we can now
spot missing values, outliers or other red flags easily during clean-up.
This way, EDA helps us to ensure that our data is not only clean but
also understood as well leading to more precise and dependable
subsequent analysis and models. In this way, one can be sure that all
the relevant information regarding the used dataset has been found
before any decision on further steps for pre-processing is made.</p>
<aside>
<em><strong>Remarks</strong>: The original design was planned to upload
ONNX model to Minio and allows SpringBoot application load it
dynamically. Because of rushing out project time resource, this
implementation changed directly to bundle ONNX model into SpringBoot
docker image together with other parameter files with .json
extension.</em>
</aside>
<h6 id="constant-features">Constant Features</h6>
<p>In the context of EDA, the first step and effort can be to interface
with constant features so as to remove them because they do not convey
any relevancy and cannot be utilized in predictive modeling. The term
“constant feature” refers to any feature where the value is the same
across all records in the dataset.</p>
<p>The following columns were identified as belonging to constant
features</p>
<ul class="incremental">
<li>card_on_dark_web - has False value only</li>
</ul>
<h6 id="missing-values">Missing Values</h6>
<p>Columns having missing values can be spotted during EDA. With regard
to this, it is umost likely you delete them or let’s say fill them in,
on what the percentage of values were missing so long it was not too
great a number. The available dataset has 428339 missing values under
_state attribute with 12.6%, merchant_zip has 449930 missing values with
13.2%, and transaction_error has 3355771 missing values which is 98.4%
of the total rows. First let’s take a look at “transaction_error”. In
this case, we should mention that the derived value comes from ‘No
Error’ so the stating error ‘No Error’ is considered quite enough for
solving problems. For the “merchant_state” and “merchant_zip”
attributes, in respect of the timeline to complete the project, these
types of transactions will be bypassed at this phase.</p>
<h6 id="unique-values">Unique Values</h6>
<p>They rightfully advise that such unique values are also indicative of
possible outliers, which are values that fall well outside the expected
range and can impact the performance of the model adversely. The EDA
report signaled unique value found in feature “transaction_id”. In fact
this feature is system generated and does not have any significance for
target prediction.</p>
<h6 id="zero-values">Zero Values</h6>
<p>EDA reported that feature “total_debt” and “card_index” have zero
values. These alerts will be ignored. Debt of zero dollar makes sense
for those card holder holdig healthy record while card_index is a
meaningless identifier for target. Handling for “card_index” will be
discussed later.</p>
<h6 id="pii-data">PII Data</h6>
<p>To respect data privacy, all PII data will be removed from data set
including “first_name”, “last_name”, “address”, “email”, and
“birth_month”.</p>
<h6 id="high-correlation">High Correlation</h6>
<p>High Correlation Removal reported in EDA report is necessary for
variable duplication to reduce dataset side and outliers. After
reviewing the high correlation alerts, the following attributes will be
removed.</p>
<p>As for the columns generated by the system but which do not have any
relevance to the prediction made are:</p>
<ul class="incremental">
<li>account_open_date</li>
<li>card_id</li>
<li>card_index</li>
<li>card_number</li>
<li>credit_limit</li>
<li>customer_id</li>
<li>current_age</li>
<li>cvv_code</li>
<li>has_chip</li>
<li>merchant_id</li>
<li>merchant_state</li>
<li>merchant_zip</li>
<li>per_capita_income</li>
<li>yearly_income</li>
</ul>
<h6 id="datetime-features">DateTime Features</h6>
<p>Chronicling time is a crucial aspect in identifying fraud, as it
delineates the trends and sequence of fraudulent activities that take
place, allows risk evaluation on an instant basis, and enables the model
to be more efficient. Criminals are said to operate on time schedules,
thus, time framed transactions or a series of transactions in a short
time could be suspicious. Time helps understand the normal behaviour of
a client and its deviation as well as aids in fraud detection while
cutting down unnecessary detections. Also, temporal context is important
in systems that are aimed at preventing fraud in real-time because such
systems must take into account the time of the day, regions and times of
the year that affect genuine transaction. Correctly measured time
variables improve the overall performance of models aimed at detecting
fraud in all its forms.</p>
<h6 id="categorical-variables">Categorical Variables</h6>
<p>It is important to identify and analyze categorical variables as they
can greatly impact one’s analysis and predictive models. Some
categorical variables may need special treatment like encoding, grouping
or even excluding them altogether from the analysis if they contain too
many categories (high cardinality) or very few observations (low
frequency).</p>
<p>Weighted Target Encoding is a novel encoding scheme that applies both
global and local statistics to improve the encoding of categorical
features. The overall mean (for instance, the overall fraud rate) and
the segmented means are blended together using a category frequency
driven smoothing constant. The general formula of applied values is
computed as follows:</p>
<p><span
class="math display">(<em>w</em><em>e</em><em>i</em><em>g</em><em>h</em><em>t</em> * <em>c</em><em>a</em><em>t</em><em>e</em><em>g</em><em>o</em><em>r</em><em>y</em><sub><em>m</em></sub><em>e</em><em>a</em><em>n</em>) + ((1 − <em>w</em><em>e</em><em>i</em><em>g</em><em>h</em><em>t</em>) * <em>g</em><em>l</em><em>o</em><em>b</em><em>a</em><em>l</em><sub><em>m</em></sub><em>e</em><em>a</em><em>n</em>), <em>w</em><em>h</em><em>e</em><em>r</em><em>e</em><em>w</em><em>e</em><em>i</em><em>g</em><em>h</em><em>t</em> = <em>n</em>/(<em>n</em> + <em>m</em><em>i</em><em>n</em><sub><em>s</em></sub><em>a</em><em>m</em><em>p</em><em>l</em><em>e</em><em>s</em>).</span></p>
<p>Particularly, this approach is relevant for finding frauds owing
to:</p>
<ul class="incremental">
<li>mitigate data sparsity by taking into account both infrequent and
frequent patterns of frauds</li>
<li>increase the robustness of the encodings by incorporating both
global and local metrics</li>
<li>work well with non homogeneous category distributions in the
transactional data</li>
<li>help in improving the signal to noise ratio</li>
<li>not compromise on the importance of the encoded feature</li>
</ul>
<p>Moreover, the ability of the method to adaptively smooth in rare
categories is its main benefit over basic target encoding, which makes
it appropriate for fraud detection which has rare patterns that abuse
the norm. The smoothing parameter can be altered during the process to
account for global trends or bias towards specific category fraud
rates.</p>
<p>It is crucial to ensure that all categorical variables take a
numerical value which is crucial for the subsequent steps of MLOps
pipeline namely:</p>
<ul class="incremental">
<li>gender</li>
<li>card_brand</li>
<li>card_type</li>
<li>merchant_city</li>
<li>merchant_mcc_code</li>
<li>transaction_error</li>
<li>transaction_type</li>
</ul>
<h6 id="feature-magnitude">Feature Magnitude</h6>
<p>Feature magnitude issues can happen when some features in a dataset
have different scales. This may impact the efficiency of data analysis
algorithms that are scale sensitive.</p>
<p>To begin with, one can define a boxplot as a graphical representation
of statistical data used to detect outliers. Outliers are usually values
that fall below Q1 - 1.5IQR or above Q3 + 1.5IQR where the first and
third quartiles are Q1 and Q3 respectively, and IQR is the Interquartile
Range (Q3 - Q1).</p>
<p>A box plot is made up of a box (that’s why it’s called a box plot)
which represents the IQR, a line that shows the median value within the
box, and two whiskers extending from the box to represent the range of
values covered by 1.5*IQR for data. Those lying beyond the whiskers are
outliers.</p>
<h6 id="target-encoding">Target Encoding</h6>
<p>Finally encoded_df need to map fraud_detected to 0 and 1 to
numericalize target column</p>
<h6 id="duplicate-rows">Duplicate Rows</h6>
<p>Dropping duplicate rows does not have big impact against final
prediction.</p>
<h6 id="feature-magnitude-1">Feature Magnitude</h6>
<p>Feature magnitude issues can happen when some features in a dataset
have different scales. This may impact the efficiency of data analysis
algorithms that are scale sensitive. Standardization scaling techniques
was applied to handle such cases before using the data for further
analysis or model training.</p>
<p>The following boxplot shows that encoded data has serious feature
magnitude issue. Most of features scaled down to zero while the scale of
total debts ranging from 0 up to over 450,000. This situation may impact
the upcoming deep learning input.</p>
<figure>
<img src="images/boxplat_before_scaling.png" alt="" style="width: 50%;">
<figcaption>
Figure 14 - Feature Magnitude Boxplot before scaling
</figcaption>
</figure>
<p>To solve magnitude issue, Standard Scaler was used to balance all
numerical features. Figure 15 shows the improvement after applying
scaling method.</p>
<figure>
<img src="images/boxplot_after_scaling.png" alt="" style="width: 50%;">
<figcaption>
Figure 15 - Feature Magnitude Boxplot after scaling
</figcaption>
</figure>
<h6 id="outliers">Outliers</h6>
<p>Outliers are observations that deviate significantly from other data
points. They can be detected in several ways during Exploratory Data
Analysis (EDA). Based on the previous boxplot, it uses 5th and 95th
percentile to visualize those outliers.</p>
<p>A study carried out in 2021 compared different outlier detection
techniques to help data scientists select an algorithm for building a
better model (Agarwal &amp; Gupta, 2021). The researchers concluded that
Angel-based Outlier Detection (ABOD) and One-class SVM (OCSVM)
techniques improved data analysis and machine learning model performance
most across classifiers. In addition, each classifier had specific
outlier detection techniques performing best.</p>
<h6 id="data-distribution">Data Distribution</h6>
<p>The deviation of data can have an effect on how statistical analysis
and machine learning models perform. To address this, the data should be
transformed to center at zero and have a standard deviation of unity.
This paper will discuss different approaches to dealing with skewed data
using Python.</p>
<pre class="plaintext"><code>Skewness DataFrame:
shape: (23, 3)
┌───────────────────────────┬───────────┬─────────────────────────┐
│ Column                    ┆ Skewness  ┆ Interpretation          │
│ ---                       ┆ ---       ┆ ---                     │
│ str                       ┆ f64       ┆ str                     │
╞═══════════════════════════╪═══════════╪═════════════════════════╡
│ merchant_city_encoded     ┆ 2.193569  ┆ Highly skewed           │
│ merchant_mcc_code_encoded ┆ 1.845289  ┆ Highly skewed           │
│ card_type_encoded         ┆ 1.785501  ┆ Highly skewed           │
│ transaction_type_encoded  ┆ 1.530993  ┆ Highly skewed           │
│ transaction_error_encoded ┆ 1.0       ┆ Highly skewed           │
│ longitude                 ┆ -0.820656 ┆ Moderately skewed       │
│ total_debt                ┆ 0.524274  ┆ Moderately skewed       │
│ transaction_amount        ┆ 0.471247  ┆ Approximately symmetric │
│ birth_year                ┆ -0.454947 ┆ Approximately symmetric │
│ card_brand_encoded        ┆ -0.407727 ┆ Approximately symmetric │
│ latitude                  ┆ -0.352895 ┆ Approximately symmetric │
│ card_expiration_year      ┆ -0.326644 ┆ Approximately symmetric │
│ credit_score              ┆ -0.272157 ┆ Approximately symmetric │
│ transaction_hour          ┆ 0.239463  ┆ Approximately symmetric │
│ retirement_age            ┆ -0.183508 ┆ Approximately symmetric │
│ pin_last_changed_year     ┆ 0.123006  ┆ Approximately symmetric │
│ gender_encoded            ┆ -0.064169 ┆ Approximately symmetric │
│ number_cards_issued       ┆ -0.036223 ┆ Approximately symmetric │
│ card_expiration_month     ┆ 0.022826  ┆ Approximately symmetric │
│ transaction_month         ┆ -0.012889 ┆ Approximately symmetric │
│ transaction_day           ┆ -0.011803 ┆ Approximately symmetric │
│ credit_card_count         ┆ -0.009077 ┆ Approximately symmetric │
│ transaction_year          ┆ -0.004401 ┆ Approximately symmetric │
└───────────────────────────┴───────────┴─────────────────────────┘</code></pre>
<p>The Box-Cox Transformation calculates the best power transformation
for your data that reduces its skewness to make it as close to normal
distribution as possible as shown in the following output.</p>
<pre><code>Applied Box-Cox to longitude (skewness: -0.821)
Applied Box-Cox to total_debt (skewness: 0.524)
Applied Box-Cox to card_type_encoded (skewness: 1.786)
Applied Box-Cox to merchant_city_encoded (skewness: 2.194)
Applied Box-Cox to merchant_mcc_code_encoded (skewness: 1.845)
Could not transform transaction_error_encoded: Data must not be constant.
Applied Box-Cox to transaction_type_encoded (skewness: 1.531)
Applied Box-Cox to fraud_detected (skewness: 54.087)

Skewness Comparison:
Column | Before | After
----------------------------------------
birth_year: -0.455 | -0.455
credit_card_count: -0.009 | -0.009
credit_score: -0.272 | -0.272
latitude: -0.353 | -0.353
longitude: -0.821 | -0.329
retirement_age: -0.184 | -0.184
total_debt: 0.524 | -0.014
number_cards_issued: -0.036 | -0.036
pin_last_changed_year: 0.123 | 0.123
transaction_amount: 0.471 | 0.471
card_expiration_year: -0.327 | -0.327
card_expiration_month: 0.023 | 0.023
transaction_year: -0.004 | -0.004
transaction_month: -0.013 | -0.013
transaction_day: -0.012 | -0.012
transaction_hour: 0.239 | 0.239
gender_encoded: -0.064 | -0.064
card_brand_encoded: -0.408 | -0.408
card_type_encoded: 1.786 | 0.557
merchant_city_encoded: 2.194 | 0.020
merchant_mcc_code_encoded: 1.845 | 0.485
transaction_error_encoded: 1.000 | 1.000
transaction_type_encoded: 1.531 | 1.531
fraud_detected: 54.087 | 54.087</code></pre>
<h5 id="feature-selection">Feature Selection</h5>
<p>Finding feature importance is a process of determining which features
in a dataset have the greatest influence on the outcome. This can be
useful for identifying data points that should be given more attention
or discarded entirely, depending on their impact. One of the most
popular methods used to determine feature importance is Random Forest
Regressor (RFR). A research paper demonstrated how he used Random Forest
Regressor to select features for his medical prediction model (Speiser,
2021).</p>
<p>RFR with Recursive Feature Elimination with Cross Validation (RFECV)
is a powerful feature selection technique that can be used in many
machine learning applications. This method uses the Random Forest model
to identify important features and then recursively eliminates less
relevant ones using 5-Fold Cross-Validation. By combining both RFR and
RFECV, this approach can reduce overfitting while selecting an optimal
subset of features for further analysis. Additionally, it allows us to
measure the importance of each feature by calculating its contribution
towards predicting target variables accurately.</p>
<p>The following features were select for our next step - Model
Development.</p>
<pre><code>Feature Importance:
shape: (9, 3)
┌───────────────────────────┬────────────┬────────────┐
│ Feature                   ┆ Importance ┆ Percentage │
│ ---                       ┆ ---        ┆ ---        │
│ str                       ┆ f64        ┆ f64        │
╞═══════════════════════════╪════════════╪════════════╡
│ merchant_city_encoded     ┆ 0.191492   ┆ 25.237267  │
│ transaction_amount        ┆ 0.131399   ┆ 17.317443  │
│ merchant_mcc_code_encoded ┆ 0.104897   ┆ 13.824637  │
│ credit_score              ┆ 0.062163   ┆ 8.192619   │
│ latitude                  ┆ 0.061651   ┆ 8.125121   │
│ total_debt                ┆ 0.056199   ┆ 7.406611   │
│ transaction_day           ┆ 0.056067   ┆ 7.389223   │
│ birth_year                ┆ 0.048848   ┆ 6.437846   │
│ transaction_month         ┆ 0.046051   ┆ 6.069233   │
└───────────────────────────┴────────────┴────────────┘</code></pre>
<h5 id="model-development">Model Development</h5>
<p>LightGBM represents Light Gradient Boosting Machine and is one of the
most effective and efficient machine learning algorithms that is used on
large datasets. According to the publication of Huang (2020), it was
LightGBM that developed an improved version that was capable of
overcoming challenges of large-scale data which is relevant to most
operational environments including fraud detection.</p>
<p>As for our choice for model development, LightGBM is also very fast
and efficient. A new efficient technique called GOSS (Gradient-based
One-Side Sampling) is employed to remove the majority of data samples
required to find a split value which in return, cuts down the cost
related to more sample data. Also, it should be noted that LightGBM has
out of the box support for categorical features and thus, no heavy
pre-processing is required.</p>
<p>Such means that the accuracy is also on a high level and many other
classical algorithms in machine learning tasks cannot compete with it.
In Huang et al. analysis, AUC (Area Under the Curve) and accuracy from
LightGBM was higher than scores from both logistic regression and SVM
based models.</p>
<p>It is a good tool for model development as LightGBM implements
strategies to deal with missing values and provides regularization to
avoid overfitting. In addition, the model is interpretable since it is
able to give explanation as to which factors contributed to the
predictions made. Thus, the use of LightGBM is likely to assist in
effective model building that is characterized by high predictive
accuracy and interpretability.</p>
<h5 id="model-training">Model Training</h5>
<p>The light GBM model was aimed at binary classification and here
training and testing was done in an exclusive of focus on binary
classification. It used a gbdt method and for column sampling, the model
specified an 0.8 feature fraction, round one used 50 early round
stopping to avoid any cases of overfitting. The model used 9 features
and was tested on a dataset of 2,366,112 data points, which included 808
positive instances and 2,365,304 negative instances. Majority of the
necessary training was effective as the best iteration was recorded in
the first round where the Area Under the Curve (AUC) scoring was
0.983662 as the model was able to log a binary log loss of 1.23685 on
the training set.</p>
<pre><code>Training Output
---------------
[LightGBM] [Warning] boosting is set=gbdt, boosting_type=gbdt will be ignored. Current value: boosting=gbdt
[LightGBM] [Warning] feature_fraction is set=0.8, colsample_bytree=1.0 will be ignored. Current value: feature_fraction=0.8
[LightGBM] [Warning] early_stopping_round is set=50, early_stopping_rounds=50 will be ignored. Current value: early_stopping_round=50
[LightGBM] [Warning] boosting is set=gbdt, boosting_type=gbdt will be ignored. Current value: boosting=gbdt
[LightGBM] [Warning] feature_fraction is set=0.8, colsample_bytree=1.0 will be ignored. Current value: feature_fraction=0.8
[LightGBM] [Info] Number of positive: 808, number of negative: 2365304
[LightGBM] [Info] Auto-choosing row-wise multi-threading, the overhead of testing was 0.018816 seconds.
You can set `force_row_wise=true` to remove the overhead.
And if memory is not enough, you can set `force_col_wise=true`.
[LightGBM] [Info] Total Bins 1413
[LightGBM] [Info] Number of data points in the train set: 2366112, number of used features: 9
[LightGBM] [Warning] boosting is set=gbdt, boosting_type=gbdt will be ignored. Current value: boosting=gbdt
[LightGBM] [Warning] feature_fraction is set=0.8, colsample_bytree=1.0 will be ignored. Current value: feature_fraction=0.8
[LightGBM] [Warning] early_stopping_round is set=50, early_stopping_rounds=50 will be ignored. Current value: early_stopping_round=50
[LightGBM] [Info] [binary:BoostFromScore]: pavg=0.000341 -&gt; initscore=-7.981855
[LightGBM] [Info] Start training from score -7.981855
Training until validation scores don&#39;t improve for 50 rounds
Early stopping, best iteration is:
[1] train&#39;s auc: 0.983662   train&#39;s binary_logloss: 1.23685 valid&#39;s auc: 0.956276   valid&#39;s binary_logloss: 1.23453

GBMClassifier(boosting=&#39;gbdt&#39;, early_stopping_rounds=50, feature_fraction=0.8,
               learning_rate=0.01, max_depth=8,
               metric=[&#39;auc&#39;, &#39;binary_logloss&#39;], min_child_samples=5,
               n_estimators=1000, objective=&#39;binary&#39;, random_state=42,
               scale_pos_weight=2927.3564356435645, subsample=0.8, verbose=1)</code></pre>
<h5 id="model-testing">Model Testing</h5>
<p>AUC score on the validation set was 0.956276 with a binary log loss
of 1.23453. Furthermore, several model parameters for the theory were a
scale_pos_weight value of 2927.3564356435645, a max number of 8 and
learning rate of 0.01. On the average classification score, the model
obtained a score of 0.0146 while on the prediction score it got 0.9563,
which shows that this model is reliable in doing binary tasks
classification. All other aspects tested aimed at effectiveness and
prediction ability delivered positive results giving evidence to
findings by Huang et al. (2020).</p>
<pre><code>Testing Output
--------------        
[LightGBM] [Warning] boosting is set=gbdt, boosting_type=gbdt will be ignored. Current value: boosting=gbdt
[LightGBM] [Warning] feature_fraction is set=0.8, colsample_bytree=1.0 will be ignored. Current value: feature_fraction=0.8
[LightGBM] [Warning] boosting is set=gbdt, boosting_type=gbdt will be ignored. Current value: boosting=gbdt
[LightGBM] [Warning] feature_fraction is set=0.8, colsample_bytree=1.0 will be ignored. Current value: feature_fraction=0.8
[LightGBM] [Warning] boosting is set=gbdt, boosting_type=gbdt will be ignored. Current value: boosting=gbdt
[LightGBM] [Warning] feature_fraction is set=0.8, colsample_bytree=1.0 will be ignored. Current value: feature_fraction=0.8
Average Precision Score: 0.0146
AUC Score: 0.9563</code></pre>
<h3
id="r4-do-data-computing-to-generate-models-representing-models-in-portable-format-and-stored-in-file-or-database.-more-credit-is-given-if-distributed-approach-is-used-data-mining-of-big-dataset.">R4
Do data computing to generate models, representing models in portable
format and stored in file or database. More credit is given if
distributed approach is used data mining of big dataset.</h3>
<p>Complete? (Yes/No) Yes</p>
<p>If Yes, briefly describe:</p>
<ol class="incremental" type="1">
<li>what you have done,</li>
<li>what are the new features.</li>
<li>Take some screen to demonstrate the features if applicable.</li>
</ol>
<h4 id="model-deployment">Model Deployment</h4>
<p>The final model was deployed as Open Neural Network Exchange (ONNX)
format and this step can be found in the Jupyter Notebook
mlops_pipeline.ipynb
(<project_root>/project/mlops_pipeline/mlops_pipeline.ipynb). Being a
framework-neutral format, ONNX provides an opportunity to create models
in one framework and use them in one more model without the need to
address compatibility issues between the two models. Moreover, it allows
for portable implementation of the models, from cloud servers to edge
devices which renders the device agnostic deployment of the models. To
achieve this ONNX designed the high-performance computing optimizations
that are suitable for production, ones that make ONNX fast and
efficient. One of the reasons developers make use of ONNX, an
industry-standard model format, is to ensure that their models remain
usable in the long term and that they do not succumb to framework
lock-in as well as updates and migration become less of a hassle.
Lastly, ONNX provides migration across multiple machine learning
frameworks, tools and compilers which is ideal for teams working with
various technologies during the development process.</p>
<figure>
<img src="images/fraud_detection_model_onnx.png" alt="" style="width: 50%;">
<figcaption>
Figure 16 - FIinal ONNX Model Visualization
</figcaption>
</figure>
<aside>
<em><strong>Remarks</strong>: The original design was planned to upload
ONNX model to Minio and allows SpringBoot application load it
dynamically. Because of rushing out project time resource, this
implementation changed directly to bundle ONNX model into SpringBoot
docker image together with other parameter files with .json
extension.</em>
</aside>
<h4 id="ml-inference-service-and-microsoft-onnxruntime">ML Inference
Service and Microsoft ONNXRuntime</h4>
<p>Microsoft’s ONNXRuntime is an execution engine designed to work with
onnx (open neural network exchange) models with a focus on performance.
As cross-platform versions of trained machine learning models, ONNX
models make ONNXRuntime an all purposeful means to run machine learning
models, in addition to embedding them inside a SpringBoot
application.</p>
<p>For instance, in the case of a machine learning inference service,
ONNXRuntime can be employed inside a SpringBoot-based app to support the
deployment of an ONNX model. In this, ONNX Runtime is embedded into a
SpringBoot application as a normal practice while developing a machine
learning model. For example, a service class called
ModelInferenceService can be designed which also has functions to load
the ONNX model, apply the model to a data and get the result of the
prediction.</p>
<p>In the service of the model inference class, the onnxruntime is
invoked and in the process, the onnx model is saved into it. Usually,
this is achieved by a method which is invoked during the construction of
the service. This entails loading the model file which is in onnx format
from an effective location and subsequently loading it into the onnx
runtime.</p>
<p>After loading the model, the instance of the ModelInferenceService
class is able to take an input data and run the model on it. This is
accomplished within a function which takes the input data as an
argument, processes it into a form compatible with the model, and Inputs
the data into the ONNXRuntime. The data is then processed and a
prediction result is generated by the ONNXRuntime.</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">package</span><span class="im"> cp630oc</span><span class="op">.</span><span class="im">paymentsolution</span><span class="op">.</span><span class="im">modelinferenceservice</span><span class="op">;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">ai</span><span class="op">.</span><span class="im">onnxruntime</span><span class="op">.*;</span> <span class="co">// impport Microsoft ONNXRuntime </span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="kw">...</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Detect fraud using the loaded ONNX model</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> </span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="co">     * </span><span class="an">@param</span><span class="co"> </span><span class="an">card</span><span class="co"> </span>Card information</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">transaction</span><span class="co"> </span>Transaction information</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">notificationEnabled</span><span class="co"> </span>boolean indicating if notification is enabled</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@return</span> boolean indicating if fraud is detected</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">boolean</span> <span class="fu">detectFraud</span><span class="op">(</span>Card card<span class="op">,</span> Transaction transaction<span class="op">,</span> <span class="dt">boolean</span> notificationEnabled<span class="op">)</span> <span class="op">{</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>                <span class="co">// Run inference</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>                logger<span class="op">.</span><span class="fu">debug</span><span class="op">(</span><span class="st">&quot;[{}] Running inference...&quot;</span><span class="op">,</span> TAG<span class="op">);</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>                OrtSession<span class="op">.</span><span class="fu">Result</span> results <span class="op">=</span> session<span class="op">.</span><span class="fu">run</span><span class="op">(</span>inputs<span class="op">);</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>                </span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>                <span class="co">// Get the label output</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>                Optional<span class="op">&lt;</span>OnnxValue<span class="op">&gt;</span> labelOptional <span class="op">=</span> results<span class="op">.</span><span class="fu">get</span><span class="op">(</span><span class="st">&quot;label&quot;</span><span class="op">);</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>                </span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>                <span class="co">// Check if the label output is present</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> <span class="op">(!</span>labelOptional<span class="op">.</span><span class="fu">isPresent</span><span class="op">())</span> <span class="op">{</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">RuntimeException</span><span class="op">(</span><span class="st">&quot;Label output not found in model results&quot;</span><span class="op">);</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>                <span class="op">}</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>                </span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>                <span class="co">// Get the label output</span></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>                OnnxValue labelOutput <span class="op">=</span> labelOptional<span class="op">.</span><span class="fu">get</span><span class="op">();</span></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>                </span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>                <span class="co">// Check if the label output is an OnnxTensor</span></span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> <span class="op">(!(</span>labelOutput <span class="kw">instanceof</span> OnnxTensor<span class="op">))</span> <span class="op">{</span></span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">RuntimeException</span><span class="op">(</span><span class="st">&quot;Expected OnnxTensor output but got: &quot;</span> <span class="op">+</span> labelOutput<span class="op">.</span><span class="fu">getClass</span><span class="op">());</span></span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>                <span class="op">}</span></span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>                </span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>                <span class="co">// Get the label tensor</span></span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>                OnnxTensor labelTensor <span class="op">=</span> <span class="op">(</span>OnnxTensor<span class="op">)</span> labelOutput<span class="op">;</span></span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>                </span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>                <span class="co">// Get the label array</span></span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>                <span class="dt">long</span><span class="op">[]</span> labelArray <span class="op">=</span> <span class="op">(</span><span class="dt">long</span><span class="op">[])</span> labelTensor<span class="op">.</span><span class="fu">getValue</span><span class="op">();</span></span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>                </span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>                <span class="co">// Get the fraud detection result</span></span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>                <span class="dt">boolean</span> fraudDetected <span class="op">=</span> <span class="op">(</span>labelArray<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">==</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a>                <span class="kw">...</span></span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a><span class="kw">...</span></span></code></pre></div>
<h3
id="r5-create-deployable-service-components-using-application-models-using-java-based-enterprise-computing-technologies-to-create-client-program-to-do-remote-call-of-the-data-mining-services.">R5
Create deployable service components using application models using Java
based enterprise computing technologies, to create client program to do
remote call of the data mining services.</h3>
<p>Complete? (Yes/No) Yes</p>
<p>If Yes, briefly describe:</p>
<ol class="incremental" type="1">
<li>what you have done,</li>
<li>what are the new features.</li>
<li>Take some screen to demonstrate the features if applicable.</li>
</ol>
<h4 id="solution-design">Solution Design</h4>
<p>After AI model had been built, this section focus on solution
designed and implemented. Let’s narrow down to the container
diagram.</p>
<figure>
<img src="images/container_diagram_focus.png" alt="" style="width: 50%;">
<figcaption>
Figure 17 - C4 Container Diagram (Excluding MLOps Pipeline)
</figcaption>
</figure>
<h5 id="payment-processing-service">Payment Processing Service</h5>
<figure>
<img src="images/payment_processing_component_diagram.png" alt="" style="width: 30%;">
<figcaption>
Figure 18 - Payment Processing Service Component Diagram
</figcaption>
</figure>
<p>As it can be seen in Figure 18, the Payment Processing Service, as
part of the transversal functions within the Credit Card Fraud Detection
Solution, allows receiving payment requests while avoiding the risks.
This service contains several components that ensure that payments are
made seamlessly.</p>
<p>Payment Gateway sends Payment Request and a REST Controller initiates
a service that is the first in the payment request chain. This
controller’s responsibility is to implement the workflow which consists
of initiating the fraudulent detection of the payment and payment data
management. In order to check if there is possible fraudulent abuse, the
Payment Request Controller sends the request, which contains data, to
the Model Inference service. Data comes back to this service which in
turn has some actionable data which the controller considers some its
relevant data and asleep out. When all operations have been performed to
check the fraudulent abuse then Model Inference Service makes any
necessary modification updates for the fraud detection.</p>
<p>The Payment Request REST Controller certainly does an extra job, it
validates that there exists a payment request concerning the payment
which is somewhere in the system. It connects with the database client
and ensures that the request on payment is recorded in the Payment
Request Store, which is a live payment application service. This ensures
therefore that all the information regarding the payment is captured and
can be retrieved for use or for record purposes.</p>
<p>Once generally evaluated and the payment request status is updated,
it is efficiently transmitted the statsus back to external payment
gateway. This client calls the payment gateway callback interface.</p>
<h5 id="machine-learning-inference-service">Machine Learning Inference
Service</h5>
<figure>
<img src="images/model_inference_component_diagram.png" alt="" style="width: 30%;">
<figcaption>
Figure 19 - Model Inference Service Component Diagram
</figcaption>
</figure>
<p>The Model Inference Service is an important part of the Credit Card
Fraud Detection Service and is aimed at preventing fraud attempts in a
payment order. It serves as the link between the Payment Processing
Service and the fraud detection machine learning model. This service
makes sure that every payment order has passed through the fraud
assessment, and the outcome has been returned to the concerned
stakeholders.</p>
<p>The Model Inference Engine is the single engine of the service, which
runs the machine learning model using payment data as the input. It
engages in a working relationship with the Machine Learning Model that
has been uploaded with algorithms and the relevant data to display
trends of suspiciousness in the payment requests.</p>
<p>When the fraud detection i.e. review procedure ends, it generates a
result indicating whether there exists a chance of the current
transaction being fraudulent rather than normal. This result is then
routed back to the Payment Processing Service in order to bring level of
fraud detection of the corresponding payment request to the appropriate
level. Furthermore, the request handler also performs the function of
informing interested parties in the state of the payment through the
payment notification service in order to ensure that the result of the
fraud detection process is indeed notified.</p>
<h5 id="payment-notification-backend-service">Payment Notification
Backend Service</h5>
<figure>
<img src="images/payment_notification_component_diagram.png" alt="" style="width: 30%;">
<figcaption>
Figure 20 - Payment Notification Service Compoent Diagram
</figcaption>
</figure>
<p>The Payment Notification Service acts as a communicating channel for
reliable and secure intercourse of information between the system, and
the customers. The main objective of this service is to provide
information to clients about incoming payment requests especially those
assessed to be suspicious.</p>
<p>This service in its implementation is quite professional and is
designed to be secure against tampering. The request handler only
considers the customer ID as the needed parameter. After that the
handler fetches the customer’s name and email address which does not
compromise personal information and minimizes data breaches.</p>
<p>In addition the service uses the official company email or its
variations that were previously constructed for all the purposes of
correspondence. Such an approach guarantees orthodoxy and uniformity of
the messages as well as the self-defense of the corporation from
delictous phrases. Thus, the Payment Notification Service assists to
secure the system and at the same time enables great communication with
the clients.</p>
<p>If customers concern their on-hold payment if potential fraud
detected, they need to approach security officer for further
verificaition and special handling.</p>
<h4 id="end-to-end-integration">End to End Integration</h4>
<p>Based on previous from conception design, the following sequence
diagram illustrates how each components orchestrate together to deliver
value to users.</p>
<figure>
<img src="images/sequence_diagram.png" alt="" style="width: 50%;">
<figcaption>
Figure 21 - Sequence Diagram
</figcaption>
</figure>
<h5 id="springboot-framwork-v3.1.5-with-java-17">SpringBoot Framwork
v3.1.5 with Java 17</h5>
<p>As part of the course requirements, we are expected to employ the use
of Java-based Enterprise Computing as part of the project. Once we
examined the current most recent technologies in the industry, I chose
SpringBoot.</p>
<p>Back in the 1990s, EJB and associated technologies had a reputation
for being advanced technology and were embraced on a large scale. But a
lot has changed over the decades in terms of technology. There is a
trend in a lot of businesses today to embrace cloud computing and
microservice architecture. This change is caused predominantly by the
requirement for horizontal scaling capabilities now being a priority
when compared to vertical scaling capabilities which has always been the
focus in the past.</p>
<p>Another factor that explains why I selected SpringBoot in preference
to EJB related technologies is that the latter has a considerably large
memory footprint. Computer resource requirement of EJB related
technologies are relatively high which is an issue for laptops or a
personal computer that can not support such architectures.</p>
<p>As the initial goal was to build three separate microservices,
multilayerent Payment Processing Service, ML Inference Service and
Payment Notification Service along with deploying the within a service
mesh architecture, it did appear to be somewhat over-engineered while
reviewing the setup. A better provision was reached which encompassed
enveloping the three microservices within a single SpringBoot
application.</p>
<h5 id="project-skeleton">Project Skeleton</h5>
<p>The following UML class diagram outlines the project skeleton. This
can help reader understand how the SpringBoot project source code was
organized to match the above C4 component digrams and BPMN model.</p>
<figure>
<img src="images/class_diagram.png" alt="" style="width: 50%;">
<figcaption>
Figure 22 - Preliminary UML Class Diagram
</figcaption>
</figure>
<h6 id="rest-conroller">Rest Conroller</h6>
<h3 id="rest-conroller-1">Rest Conroller</h3>
<p>In a Spring Boot application, the Rest Controller
PaymentRequestRESTController provides the endpoints allowing the
application to handle the incoming HTTP requests which responds to the
business logic of the application. With respect to the Payment
Anti-Fraud Solution, the Payment Request REST Controller allows handling
the payment request received, validating the data sent and communicating
with class ModelInferenceService that process, store and analyze the
data to check for fraud.</p>
<p>This project incorporates the OpenAPI Generator that simplifies the
development of the Rest Controller. The OpenAPI Generator generates the
base code for the various REST API endpoints based on the OpenAPI
specification that was submitted. This eliminates overlap during coding
and reduces a lot of time when developing the features. A
PaymentRequestRESTController class is created, and this class is
modified to implement the logic specific to the endpoint
/payment-request. For instance, when a payment request is made, the
controller checks the contents of the request and if they are correct, a
transaction is created and stored with the information in the database.
The information is then sent to the ML Inference Service for fraud
detection. Finally, the results from this investigation are delivered to
the client and the Payment Notification Service receives the necessary
status updates.</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">package</span><span class="im"> cp630oc</span><span class="op">.</span><span class="im">paymentsolution</span><span class="op">.</span><span class="im">paymentprocessingservice</span><span class="op">;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">...</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">cp630oc</span><span class="op">.</span><span class="im">paymentsolution</span><span class="op">.</span><span class="im">paymentprocessingservice</span><span class="op">.</span><span class="im">api</span><span class="op">.</span><span class="im">PaymentRequestApi</span><span class="op">;</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">cp630oc</span><span class="op">.</span><span class="im">paymentsolution</span><span class="op">.</span><span class="im">paymentprocessingservice</span><span class="op">.</span><span class="im">api</span><span class="op">.</span><span class="im">PaymentRequestStatusApi</span><span class="op">;</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">cp630oc</span><span class="op">.</span><span class="im">paymentsolution</span><span class="op">.</span><span class="im">paymentprocessingservice</span><span class="op">.</span><span class="im">api</span><span class="op">.</span><span class="im">PaymentRequestStatusesApi</span><span class="op">;</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">cp630oc</span><span class="op">.</span><span class="im">paymentsolution</span><span class="op">.</span><span class="im">paymentprocessingservice</span><span class="op">.</span><span class="im">api</span><span class="op">.</span><span class="im">PaymentRequestsApi</span><span class="op">;</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="kw">...</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> The payment request REST controller which implements the PaymentRequestApi interface generated </span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> by OpenAPI generator<span class="co">.</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="at">@RestController</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="at">@CrossOrigin</span><span class="op">(</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    origins <span class="op">=</span> <span class="st">&quot;*&quot;</span><span class="op">,</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>    allowedHeaders <span class="op">=</span> <span class="op">{</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Content-Type&quot;</span><span class="op">,</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Accept&quot;</span><span class="op">,</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Origin&quot;</span><span class="op">,</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;X-Notification&quot;</span><span class="op">,</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Authorization&quot;</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">},</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>    methods <span class="op">=</span> <span class="op">{</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>        RequestMethod<span class="op">.</span><span class="fu">GET</span><span class="op">,</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>        RequestMethod<span class="op">.</span><span class="fu">POST</span><span class="op">,</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>        RequestMethod<span class="op">.</span><span class="fu">PUT</span><span class="op">,</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>        RequestMethod<span class="op">.</span><span class="fu">DELETE</span><span class="op">,</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>        RequestMethod<span class="op">.</span><span class="fu">OPTIONS</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">},</span></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>    exposedHeaders <span class="op">=</span> <span class="op">{</span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Access-Control-Allow-Origin&quot;</span><span class="op">,</span></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Access-Control-Allow-Credentials&quot;</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a><span class="op">)</span></span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> PaymentRequestRESTController <span class="kw">implements</span> PaymentRequestApi<span class="op">,</span> PaymentRequestsApi<span class="op">,</span> PaymentRequestStatusApi<span class="op">,</span> PaymentRequestStatusesApi <span class="op">{</span></span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Create a payment request matched with operationId in payment<span class="co">-</span>solution<span class="co">-</span>apis<span class="co">.</span>yaml<span class="co">.</span></span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> </span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">request</span><span class="co"> </span>The request body<span class="co">.</span></span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">Authorization</span><span class="co"> </span>The x<span class="co">-</span>authorization header<span class="co">.</span></span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">xApiKey</span><span class="co"> </span>The x<span class="co">-</span>api<span class="co">-</span>key header<span class="co">.</span></span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">xNotification</span><span class="co"> </span>The x<span class="co">-</span>notification header<span class="co">.</span></span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@return</span> The response entity<span class="co">.</span></span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> ResponseEntity<span class="op">&lt;</span>CreatePaymentRequestResponse<span class="op">&gt;</span> <span class="fu">createPaymentRequest</span><span class="op">(</span><span class="at">@Valid</span> CreatePaymentRequestRequest request<span class="op">,</span> Optional<span class="op">&lt;</span><span class="bu">String</span><span class="op">&gt;</span> Authorization<span class="op">,</span> Optional<span class="op">&lt;</span><span class="bu">String</span><span class="op">&gt;</span> xApiKey<span class="op">,</span> Optional<span class="op">&lt;</span><span class="bu">String</span><span class="op">&gt;</span> xNotification<span class="op">)</span> <span class="op">{</span></span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a>    <span class="kw">...</span></span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb9-49"><a href="#cb9-49" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb9-50"><a href="#cb9-50" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb9-51"><a href="#cb9-51" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Get all payment requests<span class="co">.</span></span>
<span id="cb9-52"><a href="#cb9-52" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> </span>
<span id="cb9-53"><a href="#cb9-53" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">Authorization</span><span class="co"> </span>The authorization header<span class="co">.</span></span>
<span id="cb9-54"><a href="#cb9-54" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">xApiKey</span><span class="co"> </span>The x<span class="co">-</span>api<span class="co">-</span>key header<span class="co">.</span></span>
<span id="cb9-55"><a href="#cb9-55" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@return</span> The response entity<span class="co">.</span></span>
<span id="cb9-56"><a href="#cb9-56" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb9-57"><a href="#cb9-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb9-58"><a href="#cb9-58" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> ResponseEntity<span class="op">&lt;</span>PaymentRequest<span class="op">&gt;</span> <span class="fu">getPaymentRequestById</span><span class="op">(</span><span class="bu">String</span> id<span class="op">,</span> Optional<span class="op">&lt;</span><span class="bu">String</span><span class="op">&gt;</span> Authorization<span class="op">,</span> Optional<span class="op">&lt;</span><span class="bu">String</span><span class="op">&gt;</span> xApiKey<span class="op">)</span> <span class="op">{</span></span>
<span id="cb9-59"><a href="#cb9-59" aria-hidden="true" tabindex="-1"></a>    <span class="kw">...</span></span>
<span id="cb9-60"><a href="#cb9-60" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb9-61"><a href="#cb9-61" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb9-62"><a href="#cb9-62" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb9-63"><a href="#cb9-63" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Get all payment requests<span class="co">.</span></span>
<span id="cb9-64"><a href="#cb9-64" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> </span>
<span id="cb9-65"><a href="#cb9-65" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">Authorization</span><span class="co"> </span>The authorization header<span class="co">.</span></span>
<span id="cb9-66"><a href="#cb9-66" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">xApiKey</span><span class="co"> </span>The x<span class="co">-</span>api<span class="co">-</span>key header<span class="co">.</span></span>
<span id="cb9-67"><a href="#cb9-67" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@return</span> The response entity<span class="co">.</span></span>
<span id="cb9-68"><a href="#cb9-68" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb9-69"><a href="#cb9-69" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb9-70"><a href="#cb9-70" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> ResponseEntity<span class="op">&lt;</span><span class="bu">List</span><span class="op">&lt;</span>PaymentRequest<span class="op">&gt;&gt;</span> <span class="fu">getPaymentRequestsByCardNumber</span><span class="op">(</span><span class="bu">String</span> cardNumber<span class="op">,</span> Optional<span class="op">&lt;</span><span class="bu">String</span><span class="op">&gt;</span> Authorization<span class="op">,</span> Optional<span class="op">&lt;</span><span class="bu">String</span><span class="op">&gt;</span> xApiKey<span class="op">)</span> <span class="op">{</span></span>
<span id="cb9-71"><a href="#cb9-71" aria-hidden="true" tabindex="-1"></a>    <span class="kw">...</span></span>
<span id="cb9-72"><a href="#cb9-72" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb9-73"><a href="#cb9-73" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb9-74"><a href="#cb9-74" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb9-75"><a href="#cb9-75" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Get all payment requests<span class="co">.</span></span>
<span id="cb9-76"><a href="#cb9-76" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> </span>
<span id="cb9-77"><a href="#cb9-77" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">Authorization</span><span class="co"> </span>The authorization header<span class="co">.</span></span>
<span id="cb9-78"><a href="#cb9-78" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">xApiKey</span><span class="co"> </span>The x<span class="co">-</span>api<span class="co">-</span>key header<span class="co">.</span></span>
<span id="cb9-79"><a href="#cb9-79" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@return</span> The response entity<span class="co">.</span></span>
<span id="cb9-80"><a href="#cb9-80" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb9-81"><a href="#cb9-81" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb9-82"><a href="#cb9-82" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> ResponseEntity<span class="op">&lt;</span><span class="bu">List</span><span class="op">&lt;</span>PaymentRequestStatus<span class="op">&gt;&gt;</span> <span class="fu">getPaymentRequestStatusesById</span><span class="op">(</span><span class="bu">String</span> id<span class="op">,</span> Optional<span class="op">&lt;</span><span class="bu">String</span><span class="op">&gt;</span> Authorization<span class="op">,</span> Optional<span class="op">&lt;</span><span class="bu">String</span><span class="op">&gt;</span> xApiKey<span class="op">)</span> <span class="op">{</span></span>
<span id="cb9-83"><a href="#cb9-83" aria-hidden="true" tabindex="-1"></a>    <span class="kw">...</span></span>
<span id="cb9-84"><a href="#cb9-84" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb9-85"><a href="#cb9-85" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb9-86"><a href="#cb9-86" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb9-87"><a href="#cb9-87" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Get all payment requests<span class="co">.</span></span>
<span id="cb9-88"><a href="#cb9-88" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> </span>
<span id="cb9-89"><a href="#cb9-89" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">Authorization</span><span class="co"> </span>The authorization header<span class="co">.</span></span>
<span id="cb9-90"><a href="#cb9-90" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">xApiKey</span><span class="co"> </span>The x<span class="co">-</span>api<span class="co">-</span>key header<span class="co">.</span></span>
<span id="cb9-91"><a href="#cb9-91" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@return</span> The response entity<span class="co">.</span></span>
<span id="cb9-92"><a href="#cb9-92" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb9-93"><a href="#cb9-93" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb9-94"><a href="#cb9-94" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> ResponseEntity<span class="op">&lt;</span>PaymentRequestStatus<span class="op">&gt;</span> <span class="fu">getPaymentRequestStatusById</span><span class="op">(</span><span class="bu">String</span> id<span class="op">,</span> Optional<span class="op">&lt;</span><span class="bu">String</span><span class="op">&gt;</span> Authorization<span class="op">,</span> Optional<span class="op">&lt;</span><span class="bu">String</span><span class="op">&gt;</span> xApiKey<span class="op">)</span> <span class="op">{</span></span>
<span id="cb9-95"><a href="#cb9-95" aria-hidden="true" tabindex="-1"></a>    <span class="kw">...</span></span>
<span id="cb9-96"><a href="#cb9-96" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb9-97"><a href="#cb9-97" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb9-98"><a href="#cb9-98" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb9-99"><a href="#cb9-99" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Update payment request status by id<span class="co">.</span></span>
<span id="cb9-100"><a href="#cb9-100" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> </span>
<span id="cb9-101"><a href="#cb9-101" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">request</span><span class="co"> </span>The request body<span class="co">.</span></span>
<span id="cb9-102"><a href="#cb9-102" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">Authorization</span><span class="co"> </span>The x<span class="co">-</span>authorization header<span class="co">.</span></span>
<span id="cb9-103"><a href="#cb9-103" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">xApiKey</span><span class="co"> </span>The x<span class="co">-</span>api<span class="co">-</span>key header<span class="co">.</span></span>
<span id="cb9-104"><a href="#cb9-104" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">xNotification</span><span class="co"> </span>The x<span class="co">-</span>notification header<span class="co">.</span></span>
<span id="cb9-105"><a href="#cb9-105" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@return</span> The response entity<span class="co">.</span></span>
<span id="cb9-106"><a href="#cb9-106" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb9-107"><a href="#cb9-107" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb9-108"><a href="#cb9-108" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> ResponseEntity<span class="op">&lt;</span>PaymentRequestStatus<span class="op">&gt;</span> <span class="fu">updatePaymentRequestStatusById</span><span class="op">(</span>UpdatePaymentRequestStatusByIdRequest request<span class="op">,</span> Optional<span class="op">&lt;</span><span class="bu">String</span><span class="op">&gt;</span> Authorization<span class="op">,</span> Optional<span class="op">&lt;</span><span class="bu">String</span><span class="op">&gt;</span> xApiKey<span class="op">,</span> Optional<span class="op">&lt;</span><span class="bu">String</span><span class="op">&gt;</span> xNotification<span class="op">)</span> <span class="op">{</span></span>
<span id="cb9-109"><a href="#cb9-109" aria-hidden="true" tabindex="-1"></a>    <span class="kw">...</span></span>
<span id="cb9-110"><a href="#cb9-110" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb9-111"><a href="#cb9-111" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>At the front end SvelteKit is used to create modern, responsive and
interactive user interfaces. The API interaction of SvelteKit with the
Spring Boot Rest Controller is implemented through an API service,
api.ts which is written in TypeScript that resides within the SvelteKit
project. This service allows to abstract the details of the API
end-point on the backend from the client-side application. For instance,
when a security officer makes a card related payment requests query
using the front end, the SvelteKit application contact at
/payment-requests endpoint using searchTransactions function. The
function takes care of settings such as Content-Type, Authorization, and
other custom headers or payloads.</p>
<p>The sequence of operations starts with SvelteKit accepting the
details of the payment from the user using its flexible forms and
posting the information in the form of a JSON object to the address
/payment-requests of the backend. The api.ts module provides the details
for composing HTTP requests including handling of errors and responses.
It guarantees that the transfer of data from the frontend to the backend
is safe and efficient.</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a># api<span class="op">.</span><span class="fu">ts</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">type { PaymentRequest, PaymentRequestStatus, UpdatePaymentRequestStatusByIdRequest } from &#39;</span><span class="op">.</span><span class="im">/types&#39;</span><span class="op">;</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co">// Payment Solutoin API Endpoint</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="dt">const</span> API_BASE <span class="op">=</span> <span class="kw">import</span><span class="op">.</span><span class="im">meta</span><span class="op">.</span><span class="im">env</span><span class="op">.</span><span class="im">VITE_PAYMENT_REQUEST_API_URL</span><span class="op">;</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="dt">const</span> headers <span class="op">=</span> <span class="op">{</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="er">&#39;</span>Content<span class="op">-</span>Type<span class="er">&#39;</span><span class="op">:</span> <span class="er">&#39;</span>application<span class="op">/</span>json<span class="er">&#39;</span><span class="op">,</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span class="er">&#39;</span>Accept<span class="er">&#39;</span><span class="op">:</span> <span class="er">&#39;</span>application<span class="op">/</span>json<span class="er">&#39;</span><span class="op">,</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    <span class="er">&#39;</span>Authorization<span class="er">&#39;</span><span class="op">:</span> `Bearer $<span class="op">{</span><span class="kw">import</span><span class="op">.</span><span class="im">meta</span><span class="op">.</span><span class="im">env</span><span class="op">.</span><span class="im">VITE_API_TOKEN}`,</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>    <span class="er">&#39;</span>X<span class="op">-</span>Notification<span class="er">&#39;</span><span class="op">:</span> <span class="er">&#39;</span>true<span class="er">&#39;</span><span class="op">,</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>export async function <span class="fu">searchTransactions</span><span class="op">(</span>cardNumber<span class="op">:</span> string<span class="op">):</span> Promise<span class="op">&lt;</span>PaymentRequest<span class="op">[]&gt;</span> <span class="op">{</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="kw">...</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>export async function <span class="fu">getTransactionDetail</span><span class="op">(</span>id<span class="op">:</span> string<span class="op">):</span> Promise<span class="op">&lt;</span>PaymentRequest<span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="kw">...</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>export async function <span class="fu">getTransactionStateHistory</span><span class="op">(</span>id<span class="op">:</span> string<span class="op">):</span> Promise<span class="op">&lt;</span>PaymentRequestStatus<span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="kw">...</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>export async function <span class="fu">updateTransactionState</span><span class="op">(</span>request<span class="op">:</span> UpdatePaymentRequestStatusByIdRequest<span class="op">):</span> Promise<span class="op">&lt;</span>PaymentRequestStatus<span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a><span class="kw">...</span></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h6 id="dependency-injection">Dependency Injection</h6>
<p>SpringBoot is the widely used framework for building Java
applications. It offers a Dependency Injection (DI) feature that allows
developers to manage and configure application components. DI is a
design pattern for loosening the coupling between components, which
makes it easier to design, test, and maintain the code. With respect to
SpringBoot, once a component is created, it is often necessary to
‘autowire’ dependencies into it. If the component has a dependency,
SpringBoot will “autowire” this dependency instead of forcing the
component to build or search for it. This is done by placing the <span
class="citation" data-cites="Autowired">@Autowired</span> annotation on
fields, constructors, and methods where the dependency is necessary.
Autowiring is normally done in conjunction with the Singleton design
pattern which restricts the number of instances of a class within an
application. SpringBoot is set by default to create components as
singletons, meaning that every time a component that has been modified
is autocreated, the same instance is made, and will be used wherever
it’s needed. This makes optimal use of available resources and
guarantees uniformity of the application at all times.</p>
<pre><code>package cp630oc.paymentsolution.paymentprocessingservice;
...
import org.springframework.beans.factory.annotation.Autowired;
...
import cp630oc.paymentsolution.modelinferenceservice.ModelInferenceService;
...
/**
 * The payment request REST controller which implements the PaymentRequestApi interface generated 
 * by OpenAPI generator.
 */
@RestController
@CrossOrigin(
    origins = &quot;*&quot;,
    allowedHeaders = {
        &quot;Content-Type&quot;,
        &quot;Accept&quot;,
        &quot;Origin&quot;,
        &quot;X-Notification&quot;,
        &quot;Authorization&quot;
    },
    methods = {
        RequestMethod.GET,
        RequestMethod.POST,
        RequestMethod.PUT,
        RequestMethod.DELETE,
        RequestMethod.OPTIONS
    },
    exposedHeaders = {
        &quot;Access-Control-Allow-Origin&quot;,
        &quot;Access-Control-Allow-Credentials&quot;
    }
)
public class PaymentRequestRESTController implements PaymentRequestApi, PaymentRequestsApi, PaymentRequestStatusApi, PaymentRequestStatusesApi {
    ...
    @Autowired
    private ModelInferenceService modelInferenceService;
    ...
    /**
     * Create a payment request matched with operationId in payment-solution-apis.yaml.
     * 
     * @param request The request body.
     * @param Authorization The x-authorization header.
     * @param xApiKey The x-api-key header.
     * @param xNotification The x-notification header.
     * @return The response entity.
     */
    @Override
    public ResponseEntity&lt;CreatePaymentRequestResponse&gt; createPaymentRequest(@Valid CreatePaymentRequestRequest request, Optional&lt;String&gt; Authorization, Optional&lt;String&gt; xApiKey, Optional&lt;String&gt; xNotification) {
        ...
        // Detect fraud
        logger.debug(&quot;[{}] Detecting fraud ...&quot;, TAG);
        boolean fraudDetected = modelInferenceService.detectFraud(card, savedTransaction, notificationEnabled);
        logger.debug(&quot;[{}] Fraud detected: {}&quot;, TAG, fraudDetected);
        ...
    }
    ...
}</code></pre>
<h6 id="jpa-and-hibernate">JPA and Hibernate</h6>
<p>SpringBoot simplifies the development process through its JPA,
Hibernate and <span class="citation" data-cites="Entity">@Entity</span>
and <span class="citation" data-cites="Repository">@Repository</span>
annotations. JPA also provides a level of abstraction over JDBC,
allowing for easier application to database interactions. Hibernate is
one of the JPA specification implementations that adds addtitional
features such as caching and dirty checking. The <span class="citation"
data-cites="Entity">@Entity</span> annotation indicates that a Java
class will be treated as an entity which will be mapped to a database
table and maintain database schema migration automatically. Each
instance of the entity will correspond to one row in the table while the
entity’s fields will correspond to the columns of the table. This
enhances the interaction of the programmer with the database on the
object oriented level. To indicate that some class is functioning as a
repository and should be automatically discovered via Spring’s component
scan the interface must be annotated with <span class="citation"
data-cites="Repository">@Repository</span>. This annotation enhances the
efficiency of coding and automatic code generation by minimizing the
amount of boilerplate and automatically generating bean definition
language files. It translates any technology-driven specific exceptions
into non-thread-safe unified data access exceptions of the Spring
framework. The efforts of JPA, Hibernate, and the incorporated
annotations <span class="citation" data-cites="Entity">@Entity</span>
and <span class="citation" data-cites="Repository">@Repository</span>
are resulted in fast development since they cut down manual effort in
coding which makes code reuse and maintainability better.</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a># Example of Transaction <span class="bu">State</span> <span class="bu">Entity</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="kw">package</span><span class="im"> cp630oc</span><span class="op">.</span><span class="im">paymentsolution</span><span class="op">.</span><span class="im">paymentrequeststore</span><span class="op">.</span><span class="im">entity</span><span class="op">;</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">jakarta</span><span class="op">.</span><span class="im">persistence</span><span class="op">.*;</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">java</span><span class="op">.</span><span class="im">util</span><span class="op">.</span><span class="im">Date</span><span class="op">;</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> The transaction entity<span class="co">.</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="at">@Entity</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="at">@Table</span><span class="op">(</span>name <span class="op">=</span> <span class="st">&quot;transaction_states&quot;</span><span class="op">)</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> TransactionState <span class="op">{</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">@EmbeddedId</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> TransactionStateId id<span class="op">;</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">@ManyToOne</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">@JoinColumn</span><span class="op">(</span>name <span class="op">=</span> <span class="st">&quot;id&quot;</span><span class="op">,</span> insertable <span class="op">=</span> <span class="kw">false</span><span class="op">,</span> updatable <span class="op">=</span> <span class="kw">false</span><span class="op">)</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> Transaction transaction<span class="op">;</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Temporal</span><span class="op">(</span>TemporalType<span class="op">.</span><span class="fu">TIMESTAMP</span><span class="op">)</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Column</span><span class="op">(</span>name <span class="op">=</span> <span class="st">&quot;createdAt&quot;</span><span class="op">,</span> nullable <span class="op">=</span> <span class="kw">false</span><span class="op">)</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="bu">Date</span> createdAt<span class="op">;</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Temporal</span><span class="op">(</span>TemporalType<span class="op">.</span><span class="fu">TIMESTAMP</span><span class="op">)</span></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Column</span><span class="op">(</span>name <span class="op">=</span> <span class="st">&quot;updatedAt&quot;</span><span class="op">,</span> nullable <span class="op">=</span> <span class="kw">false</span><span class="op">)</span></span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="bu">Date</span> updatedAt<span class="op">;</span></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Temporal</span><span class="op">(</span>TemporalType<span class="op">.</span><span class="fu">TIMESTAMP</span><span class="op">)</span></span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Column</span><span class="op">(</span>name <span class="op">=</span> <span class="st">&quot;deletedAt&quot;</span><span class="op">,</span> nullable <span class="op">=</span> <span class="kw">true</span><span class="op">)</span></span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="bu">Date</span> deletedAt<span class="op">;</span></span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Get the transaction state ID<span class="co">.</span></span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@return</span> the transaction state ID</span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> TransactionStateId <span class="fu">getId</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> id<span class="op">;</span></span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Set the transaction state ID<span class="co">.</span></span>
<span id="cb12-43"><a href="#cb12-43" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">id</span><span class="co"> </span>the transaction state ID</span>
<span id="cb12-44"><a href="#cb12-44" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb12-45"><a href="#cb12-45" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">setId</span><span class="op">(</span>TransactionStateId id<span class="op">)</span> <span class="op">{</span></span>
<span id="cb12-46"><a href="#cb12-46" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">id</span> <span class="op">=</span> id<span class="op">;</span></span>
<span id="cb12-47"><a href="#cb12-47" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb12-48"><a href="#cb12-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-49"><a href="#cb12-49" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb12-50"><a href="#cb12-50" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Get the transaction<span class="co">.</span></span>
<span id="cb12-51"><a href="#cb12-51" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@return</span> the transaction</span>
<span id="cb12-52"><a href="#cb12-52" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb12-53"><a href="#cb12-53" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> Transaction <span class="fu">getTransaction</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb12-54"><a href="#cb12-54" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> transaction<span class="op">;</span></span>
<span id="cb12-55"><a href="#cb12-55" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb12-56"><a href="#cb12-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-57"><a href="#cb12-57" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb12-58"><a href="#cb12-58" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Set the transaction<span class="co">.</span></span>
<span id="cb12-59"><a href="#cb12-59" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">transaction</span><span class="co"> </span>the transaction</span>
<span id="cb12-60"><a href="#cb12-60" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb12-61"><a href="#cb12-61" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">setTransaction</span><span class="op">(</span>Transaction transaction<span class="op">)</span> <span class="op">{</span></span>
<span id="cb12-62"><a href="#cb12-62" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">transaction</span> <span class="op">=</span> transaction<span class="op">;</span></span>
<span id="cb12-63"><a href="#cb12-63" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb12-64"><a href="#cb12-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-65"><a href="#cb12-65" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb12-66"><a href="#cb12-66" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Get the creation date and time<span class="co">.</span></span>
<span id="cb12-67"><a href="#cb12-67" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@return</span> the creation date and time</span>
<span id="cb12-68"><a href="#cb12-68" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb12-69"><a href="#cb12-69" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="bu">Date</span> <span class="fu">getCreatedAt</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb12-70"><a href="#cb12-70" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> createdAt<span class="op">;</span></span>
<span id="cb12-71"><a href="#cb12-71" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb12-72"><a href="#cb12-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-73"><a href="#cb12-73" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb12-74"><a href="#cb12-74" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Set the creation date and time<span class="co">.</span></span>
<span id="cb12-75"><a href="#cb12-75" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">createdAt</span><span class="co"> </span>the creation date and time</span>
<span id="cb12-76"><a href="#cb12-76" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb12-77"><a href="#cb12-77" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">setCreatedAt</span><span class="op">(</span><span class="bu">Date</span> createdAt<span class="op">)</span> <span class="op">{</span></span>
<span id="cb12-78"><a href="#cb12-78" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">createdAt</span> <span class="op">=</span> createdAt<span class="op">;</span></span>
<span id="cb12-79"><a href="#cb12-79" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb12-80"><a href="#cb12-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-81"><a href="#cb12-81" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb12-82"><a href="#cb12-82" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Get the update date and time<span class="co">.</span></span>
<span id="cb12-83"><a href="#cb12-83" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@return</span> the transaction date and time</span>
<span id="cb12-84"><a href="#cb12-84" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb12-85"><a href="#cb12-85" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="bu">Date</span> <span class="fu">getUpdatedAt</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb12-86"><a href="#cb12-86" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> createdAt<span class="op">;</span></span>
<span id="cb12-87"><a href="#cb12-87" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb12-88"><a href="#cb12-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-89"><a href="#cb12-89" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb12-90"><a href="#cb12-90" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Set the update date and time<span class="co">.</span></span>
<span id="cb12-91"><a href="#cb12-91" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">updatedAt</span><span class="co"> </span>the update date and time</span>
<span id="cb12-92"><a href="#cb12-92" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb12-93"><a href="#cb12-93" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">setUpdatedAt</span><span class="op">(</span><span class="bu">Date</span> updatedAt<span class="op">)</span> <span class="op">{</span></span>
<span id="cb12-94"><a href="#cb12-94" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">updatedAt</span> <span class="op">=</span> updatedAt<span class="op">;</span></span>
<span id="cb12-95"><a href="#cb12-95" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb12-96"><a href="#cb12-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-97"><a href="#cb12-97" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb12-98"><a href="#cb12-98" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Get the deletion date and time<span class="co">.</span></span>
<span id="cb12-99"><a href="#cb12-99" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@return</span> the deletion date and time</span>
<span id="cb12-100"><a href="#cb12-100" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb12-101"><a href="#cb12-101" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="bu">Date</span> <span class="fu">getDeletedAt</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb12-102"><a href="#cb12-102" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> deletedAt<span class="op">;</span></span>
<span id="cb12-103"><a href="#cb12-103" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb12-104"><a href="#cb12-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-105"><a href="#cb12-105" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb12-106"><a href="#cb12-106" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Set the deletion date and time<span class="co">.</span></span>
<span id="cb12-107"><a href="#cb12-107" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">deletedAt</span><span class="co"> </span>the deletion date and time</span>
<span id="cb12-108"><a href="#cb12-108" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb12-109"><a href="#cb12-109" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">setDeletedAt</span><span class="op">(</span><span class="bu">Date</span> deletedAt<span class="op">)</span> <span class="op">{</span></span>
<span id="cb12-110"><a href="#cb12-110" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">deletedAt</span> <span class="op">=</span> deletedAt<span class="op">;</span></span>
<span id="cb12-111"><a href="#cb12-111" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb12-112"><a href="#cb12-112" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>Also, it makes it possible for the developers to create business
logic rather than concern themselves with the complexities of a database
which in turn boosts productivity and effectiveness.</p>
<p>All entity classes and repositories interface can be found in pacakge
cp630.paymentsolution.paymentrequeststore package or can be found in the
class diagram.</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">package</span><span class="im"> cp630oc</span><span class="op">.</span><span class="im">paymentsolution</span><span class="op">.</span><span class="im">paymentprocessingservice</span><span class="op">;</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="kw">...</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> The payment request REST controller which implements the PaymentRequestApi interface generated </span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> by OpenAPI generator<span class="co">.</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="at">@RestController</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="at">@CrossOrigin</span><span class="op">(</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    origins <span class="op">=</span> <span class="st">&quot;*&quot;</span><span class="op">,</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    allowedHeaders <span class="op">=</span> <span class="op">{</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Content-Type&quot;</span><span class="op">,</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Accept&quot;</span><span class="op">,</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Origin&quot;</span><span class="op">,</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;X-Notification&quot;</span><span class="op">,</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Authorization&quot;</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">},</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>    methods <span class="op">=</span> <span class="op">{</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>        RequestMethod<span class="op">.</span><span class="fu">GET</span><span class="op">,</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>        RequestMethod<span class="op">.</span><span class="fu">POST</span><span class="op">,</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>        RequestMethod<span class="op">.</span><span class="fu">PUT</span><span class="op">,</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>        RequestMethod<span class="op">.</span><span class="fu">DELETE</span><span class="op">,</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>        RequestMethod<span class="op">.</span><span class="fu">OPTIONS</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">},</span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>    exposedHeaders <span class="op">=</span> <span class="op">{</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Access-Control-Allow-Origin&quot;</span><span class="op">,</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Access-Control-Allow-Credentials&quot;</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a><span class="op">)</span></span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> PaymentRequestRESTController <span class="kw">implements</span> PaymentRequestApi<span class="op">,</span> PaymentRequestsApi<span class="op">,</span> PaymentRequestStatusApi<span class="op">,</span> PaymentRequestStatusesApi <span class="op">{</span></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>    <span class="kw">...</span></span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Autowired</span></span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> TransactionRepository transactionRepository<span class="op">;</span></span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>    <span class="kw">...</span></span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Autowired</span></span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> TransactionStateRepository transactionStateRepository<span class="op">;</span></span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>        <span class="kw">...</span></span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a>    <span class="co">/**</span></span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> Create a transaction<span class="co">.</span></span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">card</span></span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@param</span><span class="co"> </span><span class="an">request</span></span>
<span id="cb13-41"><a href="#cb13-41" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@return</span></span>
<span id="cb13-42"><a href="#cb13-42" aria-hidden="true" tabindex="-1"></a>     <span class="co">*</span> <span class="an">@throws</span><span class="co"> </span><span class="an">Exception</span></span>
<span id="cb13-43"><a href="#cb13-43" aria-hidden="true" tabindex="-1"></a>     <span class="co">*/</span></span>
<span id="cb13-44"><a href="#cb13-44" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> Transaction <span class="fu">createTransaction</span><span class="op">(</span>Card card<span class="op">,</span> CreatePaymentRequestRequest request<span class="op">)</span> <span class="kw">throws</span> <span class="bu">Exception</span> <span class="op">{</span></span>
<span id="cb13-45"><a href="#cb13-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-46"><a href="#cb13-46" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span> <span class="op">{</span></span>
<span id="cb13-47"><a href="#cb13-47" aria-hidden="true" tabindex="-1"></a>            <span class="kw">...</span></span>
<span id="cb13-48"><a href="#cb13-48" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Save transaction</span></span>
<span id="cb13-49"><a href="#cb13-49" aria-hidden="true" tabindex="-1"></a>            logger<span class="op">.</span><span class="fu">debug</span><span class="op">(</span><span class="st">&quot;[{}] Saving transaction ...&quot;</span><span class="op">,</span> TAG<span class="op">);</span></span>
<span id="cb13-50"><a href="#cb13-50" aria-hidden="true" tabindex="-1"></a>            Transaction savedTransaction <span class="op">=</span> transactionRepository<span class="op">.</span><span class="fu">save</span><span class="op">(</span>transaction<span class="op">);</span></span>
<span id="cb13-51"><a href="#cb13-51" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>savedTransaction <span class="op">==</span> <span class="kw">null</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb13-52"><a href="#cb13-52" aria-hidden="true" tabindex="-1"></a>                logger<span class="op">.</span><span class="fu">debug</span><span class="op">(</span><span class="st">&quot;[{}] Failed to save transaction&quot;</span><span class="op">,</span> TAG<span class="op">);</span></span>
<span id="cb13-53"><a href="#cb13-53" aria-hidden="true" tabindex="-1"></a>                <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Exception</span><span class="op">(</span><span class="st">&quot;Failed to save transaction&quot;</span><span class="op">);</span></span>
<span id="cb13-54"><a href="#cb13-54" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb13-55"><a href="#cb13-55" aria-hidden="true" tabindex="-1"></a>            logger<span class="op">.</span><span class="fu">debug</span><span class="op">(</span><span class="st">&quot;[{}] Transaction saved: {}&quot;</span><span class="op">,</span> TAG<span class="op">,</span> savedTransaction<span class="op">.</span><span class="fu">getId</span><span class="op">());</span></span>
<span id="cb13-56"><a href="#cb13-56" aria-hidden="true" tabindex="-1"></a>            transactionRepository<span class="op">.</span><span class="fu">flush</span><span class="op">();</span></span>
<span id="cb13-57"><a href="#cb13-57" aria-hidden="true" tabindex="-1"></a>                        <span class="kw">...</span></span>
<span id="cb13-58"><a href="#cb13-58" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Save transaction state</span></span>
<span id="cb13-59"><a href="#cb13-59" aria-hidden="true" tabindex="-1"></a>            logger<span class="op">.</span><span class="fu">debug</span><span class="op">(</span><span class="st">&quot;[{}] Saving transaction state ...&quot;</span><span class="op">,</span> TAG<span class="op">);</span></span>
<span id="cb13-60"><a href="#cb13-60" aria-hidden="true" tabindex="-1"></a>            TransactionState savedTransactionState <span class="op">=</span> transactionStateRepository<span class="op">.</span><span class="fu">save</span><span class="op">(</span>transactionState<span class="op">);</span></span>
<span id="cb13-61"><a href="#cb13-61" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>savedTransactionState <span class="op">==</span> <span class="kw">null</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb13-62"><a href="#cb13-62" aria-hidden="true" tabindex="-1"></a>                logger<span class="op">.</span><span class="fu">debug</span><span class="op">(</span><span class="st">&quot;[{}] Failed to save transaction state&quot;</span><span class="op">,</span> TAG<span class="op">);</span></span>
<span id="cb13-63"><a href="#cb13-63" aria-hidden="true" tabindex="-1"></a>                <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Exception</span><span class="op">(</span><span class="st">&quot;Failed to save transaction state&quot;</span><span class="op">);</span></span>
<span id="cb13-64"><a href="#cb13-64" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb13-65"><a href="#cb13-65" aria-hidden="true" tabindex="-1"></a>            logger<span class="op">.</span><span class="fu">debug</span><span class="op">(</span><span class="st">&quot;[{}] Transaction state saved: {}&quot;</span><span class="op">,</span> TAG<span class="op">,</span> savedTransactionState<span class="op">.</span><span class="fu">getId</span><span class="op">());</span></span>
<span id="cb13-66"><a href="#cb13-66" aria-hidden="true" tabindex="-1"></a>            transactionStateRepository<span class="op">.</span><span class="fu">flush</span><span class="op">();</span></span>
<span id="cb13-67"><a href="#cb13-67" aria-hidden="true" tabindex="-1"></a>                        <span class="kw">...</span></span>
<span id="cb13-68"><a href="#cb13-68" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">catch</span> <span class="op">(</span><span class="bu">Exception</span> e<span class="op">)</span> <span class="op">{</span></span>
<span id="cb13-69"><a href="#cb13-69" aria-hidden="true" tabindex="-1"></a>            <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Exception</span><span class="op">(</span><span class="st">&quot;Failed to create transaction: &quot;</span> <span class="op">+</span> e<span class="op">.</span><span class="fu">getMessage</span><span class="op">());</span></span>
<span id="cb13-70"><a href="#cb13-70" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb13-71"><a href="#cb13-71" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb13-72"><a href="#cb13-72" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb13-73"><a href="#cb13-73" aria-hidden="true" tabindex="-1"></a><span class="kw">...</span></span></code></pre></div>
<h3
id="r6-deploy-service-components-onto-enterprise-application-servers.">R6
Deploy service components onto enterprise application servers.</h3>
<p>Complete? (Yes/No) Yes</p>
<p>If Yes, briefly describe:</p>
<ol class="incremental" type="1">
<li>what you have done,</li>
<li>what are the new features.</li>
<li>Take some screen to demonstrate the features if applicable.</li>
</ol>
<h4 id="deployment">Deployment</h4>
<p>This project scope is very small. To speed up and prepare local demo
environment, Docker Compose was used instead of Kubernetes or Minikube
to simplify server setting in local machine for fast deployment.</p>
<figure>
<img src="images/cp630-final-project.drawio.png" alt="" style="width: 50%;">
<figcaption>
Figure 23 - Docker Compose Deployment Overview
</figcaption>
</figure>
<p>The scope of the project was small plus it was meant to serve as a
proof of concept; hence, simplicity, speed, and local development buffer
were deemed to be the top priorities in the deployment strategy. The
entire team had to work in the same environment, so in order to speed up
the testing phase, and deploy multiple services, docker compose was
used. This method maintains the basic advantages of containerization
while omitting high level orchestration tools such as Kubernetes.</p>
<p>A single docker compose file was used in this project as it has many
benefits when all services, networks, and volumes are required to be
spun up with ease. This makes the development teams lives easier as a
single command brings up the entire environment. In this very project,
docker compose was used as an orchestrator for a broad spectrum of
containers like: the payment processing services, postgresql database,
fraud detection service, Object Minio storage, and MailHog.</p>
<pre class="plaintext"><code>
# docker-compose.yml

services:
  minio:
    image: minio/minio:latest
    container_name: minio
    ports:
      - &quot;9000:9000&quot;  # MinIO API
      - &quot;9001:9001&quot;  # MinIO Console
    networks:
      - public-network
    volumes: 
      - minio-data:/data
    environment:
      MINIO_ROOT_USER: minioadmin
      MINIO_ROOT_PASSWORD: minioadmin
    command: server /data --console-address :9001

  mailhog:
    image: mailhog/mailhog
    ports:
      - &quot;8025:8025&quot;
      - &quot;1025:1025&quot;
    networks: 
      - public-network
    restart: always

  db: 
    image: postgres:16
    container_name: postgres
    ports:
      - &quot;5432:5432&quot;
    networks: 
      - public-network
    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: postgres
      POSTGRES_DB: postgres
      PGDATA: /var/lib/postgresql/data/pgdata
    volumes: 
      - pg-data:/var/lib/postgresql/data/pgdata 

  payment-solution:
    image: reidlai/cp630-payment-solution:latest
    container_name: cp630-payment-solution
    ports:
      - &quot;8080:8080&quot;
    networks:
      - public-network
    environment:
      SPRING_DATASOURCE_USERNAME: &quot;postgres&quot;
      SPRING_DATASOURCE_PASSWORD: &quot;postgres&quot;
      SPRING_DATASOURCE_URL: &quot;jdbc:postgresql://db:5432/postgres&quot;
      SPRING_PROFILES_ACTIVE: &quot;dev&quot;
      SPRING_MAIL_HOST: &quot;mailhog&quot;
      SPRING_MAIL_PORT: &quot;1025&quot;
      POSTGRES_HOST: &quot;db&quot;
      POSTGRES_PORT: 5432
      POSTGRES_USER: &quot;postgres&quot;
      POSTGRES_PASSWORD: &quot;postgres&quot;
      POSTGRES_DB: &quot;postgres&quot;
      POSTGRES_SCHEMA: &quot;public&quot;
      MODEL_PATH: &quot;/app/model/lightgbm_fraud_detector.onnx&quot;
      ENCODING_MAPPING_DIR: &quot;/app/model&quot;
    # volumes:
    #   - type: bind
    #     source: ./model
    #     target: /app/model
    #     read_only: true
    depends_on:
      - db
  mageai:
    image: reidlai/cp630-mageai:latest
    container_name: cp630-mageai
    ports: 
      - &quot;6789:6789&quot;
    networks:
      - public-network
    volumes:
      - ./data-processing/default:/home/src/default
      - mageai-data:/home/src/mage_data
    environment:
      POSTGRES_HOST: &quot;db&quot;
      POSTGRES_PORT: 5432
      POSTGRES_USER: &quot;postgres&quot;
      POSTGRES_PASSWORD: &quot;postgres&quot;
      POSTGRES_DB: &quot;postgres&quot;
      POSTGRES_SCHEMA: &quot;public&quot;
      MINIO_ENDPOINT: &quot;minio:9000&quot;
      MINIO_ACCESS_KEY: &quot;pXvDu4WNMZyqLbCNbeJB&quot;
      MINIO_SECRET_KEY: &quot;pocMOObTazz4dI1BBUjX18wp9iFHz3Kk7fls0Y0m&quot;
      MINIO_BUCKET: &quot;test&quot;
    depends_on:
      - db
      - minio
  fraud-detection-portal:
    image: reidlai/cp630-fraud-detection-portal:latest
    container_name: cp630-fraud-detection-portal
    ports:
      - &quot;3000:3000&quot;
    networks:
      - public-network
    environment:
      VITE_PAYMENT_REQUEST_API_URL: &quot;http://payment-solution:8080&quot;
    depends_on:
      - payment-solution
    
networks:
  public-network:
    driver: bridge

volumes:
  minio-data:
  pg-data:
  mageai-data:
</code></pre>
<p>The main objective was to develop a working solution that would be
suitable for local testing and relating to being offline. In this case,
Docker Compose comes in handy since the developer is able to deploy the
entire stack on his workstation without the need to configure a cluster
or have a cloud infrastructure. Since the project is developed via the
use of Docker Compose, every member of the project can have the same or
similar environment on their machines assuring the uniformity of the
development, testing and deployment environments.</p>
<p>Taking into consideration the time constraints and the goals set for
this project, employing Docker Compose was the simplest means of
deploying and thorough testing of the system’s functionalities in
entirety with no need to spend time learning or configuring
supranational tools such as Kubernetes. The project consists of a number
of microservices (payment processing, fraud detection and notification
services), and there is no need for this, since Docker Compose
facilitate the communication between these services by providing the
necessary containers and integrating networking between them
automatically.</p>
<p>Docker Compose was suitable for this PoC, however, the solution has
been developed with scalability and future deployment cases in mind. By
the time the project matures and is ready for the production phase,
other tools for orchestration such as Docker Swarm or Kubernetes can
provide support for load balancing, enhanced availability, and better
deployment features.</p>
<p>The Docker Swarm application attaches support for the Docker Compose
format to help with the optimal management of configurations written in
docker-compose.yml. Using Docker Compose can help ease the process of
configuring a project for a distributed cluster environment, making it
very straightforward. Docker Swarm is exceptionally powerful because it
offers service replication, load balancing, and node failover, making
the solution perfect for small to medium production use. There is no
need for a deep learning curve because Docker CLI is already tightly
integrated with Docker Swarm. This technology can be deployed to the
cloud or on-site on several nodes, making it resilient and more
efficient than deploying it on a single machine.</p>
<p>Kubernetes, aliases K8s, is currently the most popular and used
container orchestration tool with capabilities such as auto-scaling,
service discovery, rolling updates and self-healing. It horizontally
scales the services the system offers, which is vital for a fraud
detection system that needs to handle a very high number of transactions
in real time. Such a versatility enables a system to accommodate
increased transaction and user traffic. Robust networking (such as
ingress controllers for routing traffic) and security features (such as
role-based access control and factoring in secrets management) which are
necessary for production deployments are offered by Kubernetes. All
major providers of cloud technology (AWS EKS, Google GKE, Azure AKS
etc), endorse the use of Kubernetes, hence easing the process of cloud
deployment for better accessibility. It is easily integrated into a
CI/CD pipeline, which allows for deployments, testing, and even
monitoring to be automated. This is going to enhance the delivery
workflow of the later iterations.</p>
<p>If there is a need to transform a Docker Compose file into a
Kubernetes Deployment and StatefulSet manifests, Kompose can be used to
create the required Kubernetes resource files from the Docker config
automatically.</p>
<h4 id="quick-start">Quick Start</h4>
<h5 id="git-pull-repository">Git Pull Repository</h5>
<p>This whole project source code can be found at my GitHub repository
https://github.com/reidlai/cp630-final-project. Everyone can use git to
pull the repository by the following command.</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>$<span class="op">&gt;</span> git clone https<span class="op">:</span><span class="co">//github.com/reidlai/cp630-final-project</span></span></code></pre></div>
<h5 id="docker-image-and-docker-compose">Docker Image and Docker
Compose</h5>
<p>Run the following comand to start all container instances using
docker compose without installation.</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>$<span class="op">&gt;</span> cd cp630<span class="op">-</span><span class="dt">final</span><span class="op">-</span>project</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>$<span class="op">&gt;</span> docker compose up</span></code></pre></div>
<p>Docker compose will pull all pre-built images from my Docker Hub
repository.</p>
<p>Or invidiual container can be pull by following command</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>$<span class="op">&gt;</span> docker pull reidlai<span class="op">/</span>cp630<span class="op">-</span>mageai</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>$<span class="op">&gt;</span> docker pull reidlai<span class="op">/</span>cp630<span class="op">-</span>payment<span class="op">-</span>solution</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>$<span class="op">&gt;</span> docker pull reidlai<span class="op">/</span>cp630<span class="op">-</span>fraud<span class="op">-</span>detection<span class="op">-</span>portal</span></code></pre></div>
<h5 id="built-from-source">Built from Source</h5>
<p><strong>data-processing sub-project</strong></p>
<p>This sub-project can directly run <a href="http://Mage.AI">Mage</a>AI
docker image with volume binding with default folder</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>$<span class="op">&gt;</span> cd $FINAL_PROJECT_HOME<span class="op">/</span>project<span class="op">/</span>data<span class="op">-</span>processing</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>$<span class="op">&gt;</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>$<span class="op">&gt;</span> # After docker running<span class="op">,</span> can use browser to visit http<span class="op">:</span><span class="co">//localhost:6789</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>$<span class="op">&gt;</span> docker run <span class="op">-</span>it <span class="op">-</span>p <span class="dv">6789</span><span class="op">:</span><span class="dv">6789</span> <span class="op">-</span>v $<span class="op">(</span>pwd<span class="op">):/</span>home<span class="op">/</span>src mageai<span class="op">/</span>mageai <span class="op">/</span>app<span class="op">/</span>run_app<span class="op">.</span><span class="fu">sh</span> mage start</span></code></pre></div>
<p><strong>mlops-pipeline sub-project</strong></p>
<p>This is just a placeholder folder which maintain copy of Jupyter
Notebook and pre-built staging folder “data”. Before running steps in
Jupyter notebook, please make Python 3.11 is install and install
required modules as the following command.</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>$<span class="op">&gt;</span> cd $FINAL_PROJECT_HOME<span class="op">/</span>project<span class="op">/</span>mlops<span class="op">-</span>pipeline</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>$<span class="op">&gt;</span> pip install <span class="op">-</span>r requirements<span class="op">.</span><span class="fu">txt</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>$<span class="op">&gt;</span> # Dockerfile is also available in <span class="kw">this</span> folder</span></code></pre></div>
<p><strong>payment-solution sub-project</strong></p>
<p>This sub-project is required Java 17 SDK and Gradle 8.10
pre-installed. After installation, the following command can be run to
build app.jar. But please do not run app.jar because there is dependency
on PostgreSQL 16 and MailHog. Gradle command below can be used to run
OpenAPI Generator, unit tests, jar building, and javadoc generation.</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>$<span class="op">&gt;</span> cd $FINAL_PROJECT_HOME<span class="op">/</span>project<span class="op">/</span>mlops<span class="op">-</span>pipeline</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>$<span class="op">&gt;</span> gradle clean build</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>$<span class="op">&gt;</span> # Dockerfile is also available in <span class="kw">this</span> folder</span></code></pre></div>
<p>In addition, all unit tests can run as the following command</p>
<pre><code>$&gt; gradle test -i</code></pre>
<p><strong>fraud-detection-portal</strong></p>
<p>This sub-project is based on SvelteKit technical stack running inside
NodeJS 22. Please run the following command to build the
application.</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>$<span class="op">&gt;</span> cd $FINAL_PROJECT_HOME<span class="op">/</span>project<span class="op">/</span>fraud<span class="op">-</span>detection<span class="op">-</span>portal</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>$<span class="op">&gt;</span> npm run build</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>$<span class="op">&gt;</span> docker compose up <span class="op">-</span>d mailhog db payment<span class="op">-</span>solution </span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>$<span class="op">&gt;</span> npm run dev </span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>$<span class="op">&gt;</span> # # Dockerfile is also available in <span class="kw">this</span> folder</span></code></pre></div>
<h3
id="r7-create-web-services-soap-restful-to-use-the-data-service-components.">R7
Create web services (SOAP, RESTful) to use the data service
components.</h3>
<p>Complete? (Yes/No) Yes</p>
<p>If Yes, briefly describe:</p>
<ol class="incremental" type="1">
<li>what you have done,</li>
<li>what are the new features.</li>
<li>Take some screen to demonstrate the features if applicable.</li>
</ol>
<h3 id="openapi-and-openapi-generator">OpenAPI and OpenAPI
Generator</h3>
<p>The sequence diagram in Figure 21 is utilized to create the OpenAPI
specification for API development. This technique was highly effective
as it enabled us to visualize the design and user interactions, thus
simplifying the entire process.</p>
<figure>
<img src="images/swagger_editor.png" alt="" style="width: 90%;">
<figcaption>
Figure 24 - OpenAPI Spec Preview in Swagger Editor
</figcaption>
</figure>
<p>OpenAPI has numerous advantages and allows for automated integration
testing as well as debugging. It integrates platforms and applications
easily, making it easier to ensure interoperability of separate pieces.
Outsourcing projects to human developers who depend on a mix of language
paradigms becomes less troubling, as OpenAPI functions as a universal
interface all people and machines can comprehend.</p>
<p>Generating an interface for a SpringBoot Rest Controller bundled
inside gradle task is one of the most beneficial features of Open API.
It serves to reduce time spent on development because boilerplate code
is generated automatically, minimizing the chances of error and
inconsistency. OpenAPI guarantees that the endpoint services are in
perfect alignment with the design, resulting in an accurate, reliable
and high-quality API.</p>
<pre><code>// inside build.grade

openApiGenerate {
    generatorName = &quot;spring&quot;
    inputSpec = &quot;$projectDir/src/main/resources/payment-solution-apis.yaml&quot;
    outputDir = &quot;$buildDir/generated-sources/openapi&quot;
    apiPackage = &quot;cp630oc.paymentsolution.paymentprocessingservice.api&quot;
    modelPackage = &quot;cp630oc.paymentsolution.paymentprocessingservice.model&quot;
    configOptions = [
        dateLibrary: &quot;java8&quot;,
        interfaceOnly: &quot;true&quot;,
        useSpringBoot3: &quot;true&quot;,
        skipDefaultInterface: &quot;true&quot;,
        useTags: &quot;true&quot;,
        documentationProvider: &quot;springdoc&quot;,
        openApiNullable: &quot;false&quot;,
        useOptional: &quot;false&quot;,
        swaggerAnnotations: &quot;false&quot;,
        useSpringController: &quot;true&quot;
    ]
    templateDir = &quot;$projectDir/src/main/resources/api&quot;
}</code></pre>
<p>OpenAPI facilitates early debugging of discrepancies and breakages
that are associated with the integration of the API due to its capacity
to validate the delivered code. Validating the code against
specifications is increasingly becoming crucial, especially for
complicated API, as it saves the specialists time and shields the
systems from bugs.</p>
<p>Detail code snippet cab be found in section of Requirement 5 (R5)
while the source of Open API specification can be located at
<project_root>/project/payment-solution/src/main/resource/payment-solution-apis.yaml.</p>
<h3
id="r8-create-web-user-interfacemobile-applications-to-use-the-applicationweb-services.">R8
Create web user interface/mobile applications to use the application/web
services.</h3>
<p>Complete? (Yes/No) Yes</p>
<p>If Yes, briefly describe:</p>
<ol class="incremental" type="1">
<li>what you have done,</li>
<li>what are the new features.</li>
<li>Take some screen to demonstrate the features if applicable.</li>
</ol>
<h4 id="fraud-detection-portal-web-ui">Fraud Detection Portal (Web
UI)</h4>
<p>The lives of Web developers, Software Engineers and Graphic Designers
are full of the crafting of mockups and wireframes that help in the
overall development of an application. Various features and the overall
layout of the application is defined with the help of these mockups.
But, these mockups and wireframes enable the developers to gain a sense
of what the application may look like with these modifying attributes.
However, this entire process is diagnosed within the application life
cycle of development, which usually begins when a concept gets
approved.</p>
<p>Nonetheless, the building of these mockups and wireframes was ignored
in the case since practitioners wanted to practice the engineering part
of the software rather than focus on finding time-based issues. There is
no denying that structural sketches and building system mockups are
vital in the development of systems since they weren’t constructed
during the cycle or design phase and they assist in linking back to the
design model. As the development cycle progresses, the structural
sketches and building system mockups are built through the construction
of user flows which allow the stakeholders and the outlines of the
solutions to make changes prior to the real work being started.</p>
<h4 id="svelte-and-sveltekit-with-tailwindcss">Svelte and SvelteKit with
TailwindCSS</h4>
<p>For this project, Svelte and SvelteKit have been employed as Single
Page Application Web UI framework in which Svelte is a client-side
rendering tool while SvelteKit is a server-side rendering and Typescript
integrated application. While Java based Enterprise frameworks such as
SpringBoot can also serve as web controllers, they do tend to have
server-side rendering features which require the user to refresh the
page every time any button is pressed, which might on some occassions
interfere with the design of the user experience.</p>
<p>Figures 25 and 26 seem to provide a distant glimpse of the UI design
but the flow provides a clear demonstration of what the daily operations
look like from the perspective of a security officer without requiring
too much in terms of coding and time.</p>
<figure>
<img src="images/routes_+page.svelte.png" alt="" style="width: 50%;">
<figcaption>
Figure 25 - Web Application Home Page
</figcaption>
</figure>
<figure>
<img src="images/routes_transaction_[id]_+page.svelte.png" alt="" style="width: 50%;">
<figcaption>
Figure 26 - Payment Request Details (Security Officer Perspective)
</figcaption>
</figure>
<p>Each component in Svelte corresponds to a .svelte file which
encapsulates its HTML structure, script, and style elements. New
components can be added by adding a new .svelte file, ensuring there’s a
connection to the other components via props, stores and events. For
example, you can use props to specify custom attributes available on the
child component, or utilize Svelte stores to allow data sharing between
components.</p>
<p>Using the API during the mounting process is done through the onMount
lifecycle function within the Svelte component, where data is received
after the component has loaded.</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a># src<span class="op">/</span>routes<span class="op">/+</span>page<span class="op">.</span><span class="fu">svelte</span> <span class="op">-</span> The main page of SvelteKit application</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>script<span class="op">&gt;</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">import</span> <span class="im">{ goto } from &#39;$app/navigation&#39;</span><span class="op">;</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">import</span> <span class="im">SearchBox from &#39;$lib/components/SearchBox</span><span class="op">.</span><span class="im">svelte&#39;</span><span class="op">;</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">import</span> <span class="im">TransactionTable from &#39;$lib/components/TransactionTable</span><span class="op">.</span><span class="im">svelte&#39;</span><span class="op">;</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">import</span> <span class="im">{ searchTransactions } from &#39;$lib/api&#39;</span><span class="op">;</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">import</span> <span class="im">{ searchStore } from &#39;$lib/stores/searchStore&#39;</span><span class="op">;</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>    let transactions <span class="op">=</span> <span class="op">[];</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>    let error <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>    let loading <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Subscribe to the store</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>    $<span class="op">:</span> transactions <span class="op">=</span> $searchStore<span class="op">.</span><span class="fu">transactions</span><span class="op">;</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>    async function <span class="fu">handleSearch</span><span class="op">(</span>event<span class="op">)</span> <span class="op">{</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span> <span class="op">{</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>            loading <span class="op">=</span> <span class="kw">true</span><span class="op">;</span> </span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>            error <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>            transactions <span class="op">=</span> await <span class="fu">searchTransactions</span><span class="op">(</span>event<span class="op">.</span><span class="fu">detail</span><span class="op">);</span></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>            searchStore<span class="op">.</span><span class="fu">setSearch</span><span class="op">(</span>event<span class="op">.</span><span class="fu">detail</span><span class="op">,</span> transactions<span class="op">);</span></span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">catch</span> <span class="op">(</span>e<span class="op">)</span> <span class="op">{</span></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>            error <span class="op">=</span> e<span class="op">.</span><span class="fu">message</span><span class="op">;</span></span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a>            transactions <span class="op">=</span> <span class="op">[];</span></span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">finally</span> <span class="op">{</span></span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a>            loading <span class="op">=</span> <span class="kw">false</span><span class="op">;</span> <span class="co">// Set loading to false when search completes or fails</span></span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a>    function <span class="fu">handleSelect</span><span class="op">(</span>event<span class="op">)</span> <span class="op">{</span></span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true" tabindex="-1"></a>        <span class="cf">goto</span><span class="op">(</span>`<span class="op">/</span>transaction<span class="op">/</span>$<span class="op">{</span>event<span class="op">.</span><span class="fu">detail</span><span class="op">}</span>`<span class="op">);</span></span>
<span id="cb24-33"><a href="#cb24-33" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb24-34"><a href="#cb24-34" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;/</span>script<span class="op">&gt;</span></span>
<span id="cb24-35"><a href="#cb24-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-36"><a href="#cb24-36" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>h1<span class="op">&gt;</span>Fraud Detection Portal<span class="op">&lt;/</span>h1<span class="op">&gt;</span></span>
<span id="cb24-37"><a href="#cb24-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-38"><a href="#cb24-38" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>SearchBox initialValue<span class="op">={</span>$searchStore<span class="op">.</span><span class="fu">cardNumber</span><span class="op">}</span> on<span class="op">:</span>search<span class="op">={</span>handleSearch<span class="op">}</span> <span class="op">/&gt;</span></span>
<span id="cb24-39"><a href="#cb24-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-40"><a href="#cb24-40" aria-hidden="true" tabindex="-1"></a><span class="op">{</span>#if loading<span class="op">}</span></span>
<span id="cb24-41"><a href="#cb24-41" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;</span>div <span class="kw">class</span><span class="op">=</span><span class="st">&quot;flex items-center justify-center p-8&quot;</span><span class="op">&gt;</span></span>
<span id="cb24-42"><a href="#cb24-42" aria-hidden="true" tabindex="-1"></a>        <span class="op">&lt;</span>div <span class="kw">class</span><span class="op">=</span><span class="st">&quot;animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500&quot;</span><span class="op">&gt;&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb24-43"><a href="#cb24-43" aria-hidden="true" tabindex="-1"></a>        <span class="op">&lt;</span>p <span class="kw">class</span><span class="op">=</span><span class="st">&quot;ml-3 text-gray-600&quot;</span><span class="op">&gt;</span>Searching transactions<span class="kw">...</span><span class="op">&lt;/</span>p<span class="op">&gt;</span></span>
<span id="cb24-44"><a href="#cb24-44" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb24-45"><a href="#cb24-45" aria-hidden="true" tabindex="-1"></a><span class="op">{:</span><span class="cf">else</span> <span class="cf">if</span> error<span class="op">}</span></span>
<span id="cb24-46"><a href="#cb24-46" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;</span>div <span class="kw">class</span><span class="op">=</span><span class="st">&quot;bg-red-50 border border-red-200 rounded-lg p-4 mt-4 text-red-700&quot;</span><span class="op">&gt;</span></span>
<span id="cb24-47"><a href="#cb24-47" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span>error<span class="op">}</span></span>
<span id="cb24-48"><a href="#cb24-48" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb24-49"><a href="#cb24-49" aria-hidden="true" tabindex="-1"></a><span class="op">{:</span><span class="cf">else</span> <span class="cf">if</span> transactions<span class="op">.</span><span class="fu">length</span> <span class="op">&gt;</span> <span class="dv">0</span><span class="op">}</span></span>
<span id="cb24-50"><a href="#cb24-50" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;</span>TransactionTable </span>
<span id="cb24-51"><a href="#cb24-51" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span>transactions<span class="op">}</span> </span>
<span id="cb24-52"><a href="#cb24-52" aria-hidden="true" tabindex="-1"></a>        on<span class="op">:</span>select<span class="op">={</span>handleSelect<span class="op">}</span></span>
<span id="cb24-53"><a href="#cb24-53" aria-hidden="true" tabindex="-1"></a>    <span class="op">/&gt;</span></span>
<span id="cb24-54"><a href="#cb24-54" aria-hidden="true" tabindex="-1"></a><span class="op">{/</span><span class="cf">if</span><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb25"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a># src<span class="op">/</span>routes<span class="op">/</span>transaction<span class="op">/[</span>id<span class="op">]/+</span>page<span class="op">.</span><span class="fu">svelte</span> <span class="op">-</span> Payment <span class="bu">Request</span> Details <span class="bu">Component</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>script lang<span class="op">=</span><span class="st">&quot;ts&quot;</span><span class="op">&gt;</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">import</span> <span class="im">{ onMount } from &#39;svelte&#39;</span><span class="op">;</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">import</span> <span class="im">type { PaymentRequest } from &#39;$lib/types&#39;</span><span class="op">;</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">import</span> <span class="im">{ getTransactionDetail } from &#39;$lib/api&#39;</span><span class="op">;</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>    export let transactionId<span class="op">:</span> string<span class="op">;</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>    let transaction<span class="op">:</span> PaymentRequest <span class="op">|</span> <span class="kw">null</span> <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>    let error<span class="op">:</span> string <span class="op">|</span> <span class="kw">null</span> <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>    let loading <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">onMount</span><span class="op">(</span><span class="fu">async</span> <span class="op">()</span> <span class="op">=&gt;</span> <span class="op">{</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span> <span class="op">{</span></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>            <span class="co">// const transactionData = await fetch(`http://localhost:8080/payment-request?id=${transactionId}`).then(r =&gt; r.json());  </span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>            <span class="dt">const</span> transactionData <span class="op">=</span> await <span class="fu">getTransactionDetail</span><span class="op">(</span>transactionId<span class="op">);</span></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>            transaction <span class="op">=</span> transactionData<span class="op">;</span></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>            loading <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">catch</span> <span class="op">(</span>e<span class="op">)</span> <span class="op">{</span></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>            error <span class="op">=</span> e <span class="kw">instanceof</span> <span class="bu">Error</span> <span class="op">?</span> e<span class="op">.</span><span class="fu">message</span> <span class="op">:</span> <span class="er">&#39;</span>An error occurred<span class="er">&#39;</span><span class="op">;</span></span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>            loading <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">});</span></span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;/</span>script<span class="op">&gt;</span></span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>div <span class="kw">class</span><span class="op">=</span><span class="st">&quot;max-w-4xl mx-auto p-4 space-y-6&quot;</span><span class="op">&gt;</span></span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;!--</span> Loading <span class="bu">State</span> <span class="op">--&gt;</span></span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span>#if loading<span class="op">}</span></span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a>        <span class="op">&lt;</span>div <span class="kw">class</span><span class="op">=</span><span class="st">&quot;flex justify-center items-center h-32&quot;</span><span class="op">&gt;</span></span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a>            <span class="op">&lt;</span>div <span class="kw">class</span><span class="op">=</span><span class="st">&quot;animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500&quot;</span><span class="op">&gt;&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a>        <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;!--</span> <span class="bu">Error</span> <span class="bu">State</span> <span class="op">--&gt;</span></span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true" tabindex="-1"></a>    <span class="op">{:</span><span class="cf">else</span> <span class="cf">if</span> error<span class="op">}</span></span>
<span id="cb25-36"><a href="#cb25-36" aria-hidden="true" tabindex="-1"></a>        <span class="op">&lt;</span>div <span class="kw">class</span><span class="op">=</span><span class="st">&quot;bg-red-50 border border-red-200 rounded-lg p-4 text-red-700&quot;</span><span class="op">&gt;</span></span>
<span id="cb25-37"><a href="#cb25-37" aria-hidden="true" tabindex="-1"></a>            <span class="op">&lt;</span>p<span class="op">&gt;{</span>error<span class="op">}&lt;/</span>p<span class="op">&gt;</span></span>
<span id="cb25-38"><a href="#cb25-38" aria-hidden="true" tabindex="-1"></a>            <span class="op">&lt;</span>button </span>
<span id="cb25-39"><a href="#cb25-39" aria-hidden="true" tabindex="-1"></a>                <span class="kw">class</span><span class="op">=</span><span class="st">&quot;mt-2 text-sm text-red-600 hover:text-red-800 underline&quot;</span></span>
<span id="cb25-40"><a href="#cb25-40" aria-hidden="true" tabindex="-1"></a>                on<span class="op">:</span>click<span class="op">={()</span> <span class="op">=&gt;</span> window<span class="op">.</span><span class="fu">location</span><span class="op">.</span><span class="fu">reload</span><span class="op">()}</span></span>
<span id="cb25-41"><a href="#cb25-41" aria-hidden="true" tabindex="-1"></a>            <span class="op">&gt;</span></span>
<span id="cb25-42"><a href="#cb25-42" aria-hidden="true" tabindex="-1"></a>                Retry</span>
<span id="cb25-43"><a href="#cb25-43" aria-hidden="true" tabindex="-1"></a>            <span class="op">&lt;/</span>button<span class="op">&gt;</span></span>
<span id="cb25-44"><a href="#cb25-44" aria-hidden="true" tabindex="-1"></a>        <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb25-45"><a href="#cb25-45" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;!--</span> Content <span class="op">--&gt;</span></span>
<span id="cb25-46"><a href="#cb25-46" aria-hidden="true" tabindex="-1"></a>    <span class="op">{:</span><span class="cf">else</span><span class="op">}</span></span>
<span id="cb25-47"><a href="#cb25-47" aria-hidden="true" tabindex="-1"></a>        <span class="op">&lt;!--</span> Payment <span class="bu">Request</span> Details  <span class="op">--&gt;</span></span>
<span id="cb25-48"><a href="#cb25-48" aria-hidden="true" tabindex="-1"></a>        <span class="op">&lt;</span>div <span class="kw">class</span><span class="op">=</span><span class="st">&quot;bg-white rounded-lg p-6 mb-8 shadow-md&quot;</span><span class="op">&gt;</span></span>
<span id="cb25-49"><a href="#cb25-49" aria-hidden="true" tabindex="-1"></a>            <span class="op">&lt;</span>h3 <span class="kw">class</span><span class="op">=</span><span class="st">&quot;text-gray-700 mb-4 border-b-2 border-gray-200 pb-2&quot;</span><span class="op">&gt;</span>Payment <span class="bu">Request</span> Details<span class="op">&lt;/</span>h3<span class="op">&gt;</span></span>
<span id="cb25-50"><a href="#cb25-50" aria-hidden="true" tabindex="-1"></a>            <span class="op">&lt;</span>div <span class="kw">class</span><span class="op">=</span><span class="st">&quot;grid grid-cols-2 gap-y-3 gap-x-8 items-center&quot;</span><span class="op">&gt;</span></span>
<span id="cb25-51"><a href="#cb25-51" aria-hidden="true" tabindex="-1"></a>                <span class="op">&lt;</span>div <span class="kw">class</span><span class="op">=</span><span class="st">&quot;font-medium text-gray-700&quot;</span><span class="op">&gt;</span>Transaction ID<span class="op">:&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb25-52"><a href="#cb25-52" aria-hidden="true" tabindex="-1"></a>                <span class="op">&lt;</span>div <span class="kw">class</span><span class="op">=</span><span class="st">&quot;text-gray-900&quot;</span><span class="op">&gt;{</span>transaction<span class="op">.</span><span class="fu">id</span><span class="op">}&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb25-53"><a href="#cb25-53" aria-hidden="true" tabindex="-1"></a>                </span>
<span id="cb25-54"><a href="#cb25-54" aria-hidden="true" tabindex="-1"></a>                <span class="op">&lt;</span>div <span class="kw">class</span><span class="op">=</span><span class="st">&quot;font-medium text-gray-700&quot;</span><span class="op">&gt;</span>Amount<span class="op">:&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb25-55"><a href="#cb25-55" aria-hidden="true" tabindex="-1"></a>                <span class="op">&lt;</span>div <span class="kw">class</span><span class="op">=</span><span class="st">&quot;text-gray-900&quot;</span><span class="op">&gt;</span>$<span class="op">{</span>transaction<span class="op">.</span><span class="fu">transactionAmount</span><span class="op">}&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb25-56"><a href="#cb25-56" aria-hidden="true" tabindex="-1"></a>                </span>
<span id="cb25-57"><a href="#cb25-57" aria-hidden="true" tabindex="-1"></a>                <span class="op">&lt;</span>div <span class="kw">class</span><span class="op">=</span><span class="st">&quot;font-medium text-gray-700&quot;</span><span class="op">&gt;</span><span class="bu">Date</span><span class="op">:&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb25-58"><a href="#cb25-58" aria-hidden="true" tabindex="-1"></a>                <span class="op">&lt;</span>div <span class="kw">class</span><span class="op">=</span><span class="st">&quot;text-gray-900&quot;</span><span class="op">&gt;{</span><span class="kw">new</span> <span class="bu">Date</span><span class="op">(</span>transaction<span class="op">.</span><span class="fu">transactionDatetime</span><span class="op">).</span><span class="fu">toLocaleString</span><span class="op">()}&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb25-59"><a href="#cb25-59" aria-hidden="true" tabindex="-1"></a>                </span>
<span id="cb25-60"><a href="#cb25-60" aria-hidden="true" tabindex="-1"></a>                <span class="op">&lt;</span>div <span class="kw">class</span><span class="op">=</span><span class="st">&quot;font-medium text-gray-700&quot;</span><span class="op">&gt;</span><span class="bu">Type</span><span class="op">:&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb25-61"><a href="#cb25-61" aria-hidden="true" tabindex="-1"></a>                <span class="op">&lt;</span>div <span class="kw">class</span><span class="op">=</span><span class="st">&quot;text-gray-900&quot;</span><span class="op">&gt;{</span>transaction<span class="op">.</span><span class="fu">transactionType</span><span class="op">}&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb25-62"><a href="#cb25-62" aria-hidden="true" tabindex="-1"></a>                </span>
<span id="cb25-63"><a href="#cb25-63" aria-hidden="true" tabindex="-1"></a>                <span class="op">&lt;</span>div <span class="kw">class</span><span class="op">=</span><span class="st">&quot;font-medium text-gray-700&quot;</span><span class="op">&gt;</span>Merchant<span class="op">:&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb25-64"><a href="#cb25-64" aria-hidden="true" tabindex="-1"></a>                <span class="op">&lt;</span>div <span class="kw">class</span><span class="op">=</span><span class="st">&quot;text-gray-900&quot;</span><span class="op">&gt;</span></span>
<span id="cb25-65"><a href="#cb25-65" aria-hidden="true" tabindex="-1"></a>                    <span class="op">{</span>transaction<span class="op">.</span><span class="fu">merchantId</span><span class="op">}&lt;</span>br<span class="op">&gt;</span></span>
<span id="cb25-66"><a href="#cb25-66" aria-hidden="true" tabindex="-1"></a>                    <span class="op">&lt;</span>span <span class="kw">class</span><span class="op">=</span><span class="st">&quot;text-sm text-gray-500&quot;</span><span class="op">&gt;{</span>transaction<span class="op">.</span><span class="fu">merchantMccCode</span><span class="op">}&lt;/</span>span<span class="op">&gt;</span></span>
<span id="cb25-67"><a href="#cb25-67" aria-hidden="true" tabindex="-1"></a>                <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb25-68"><a href="#cb25-68" aria-hidden="true" tabindex="-1"></a>                </span>
<span id="cb25-69"><a href="#cb25-69" aria-hidden="true" tabindex="-1"></a>                <span class="op">&lt;</span>div <span class="kw">class</span><span class="op">=</span><span class="st">&quot;font-medium text-gray-700&quot;</span><span class="op">&gt;</span><span class="bu">Location</span><span class="op">:&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb25-70"><a href="#cb25-70" aria-hidden="true" tabindex="-1"></a>                <span class="op">&lt;</span>div <span class="kw">class</span><span class="op">=</span><span class="st">&quot;text-gray-900&quot;</span><span class="op">&gt;</span></span>
<span id="cb25-71"><a href="#cb25-71" aria-hidden="true" tabindex="-1"></a>                    <span class="op">{</span>transaction<span class="op">.</span><span class="fu">merchantCity</span><span class="op">},</span> <span class="op">{</span>transaction<span class="op">.</span><span class="fu">merchantState</span><span class="op">}</span> <span class="op">{</span>transaction<span class="op">.</span><span class="fu">merchantZip</span><span class="op">}</span></span>
<span id="cb25-72"><a href="#cb25-72" aria-hidden="true" tabindex="-1"></a>                <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb25-73"><a href="#cb25-73" aria-hidden="true" tabindex="-1"></a>                </span>
<span id="cb25-74"><a href="#cb25-74" aria-hidden="true" tabindex="-1"></a>                <span class="op">&lt;</span>div <span class="kw">class</span><span class="op">=</span><span class="st">&quot;font-medium text-gray-700&quot;</span><span class="op">&gt;</span>Fraud Detection<span class="op">:&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb25-75"><a href="#cb25-75" aria-hidden="true" tabindex="-1"></a>                <span class="op">&lt;</span>div <span class="kw">class</span><span class="op">=</span><span class="st">&quot;text-gray-900&quot;</span><span class="op">&gt;</span></span>
<span id="cb25-76"><a href="#cb25-76" aria-hidden="true" tabindex="-1"></a>                    <span class="op">&lt;</span>span <span class="kw">class</span><span class="op">={</span>transaction<span class="op">.</span><span class="fu">fraudDetected</span> <span class="op">?</span> <span class="er">&#39;</span>text<span class="op">-</span>red<span class="op">-</span><span class="dv">600</span> font<span class="op">-</span>bold<span class="er">&#39;</span> <span class="op">:</span> <span class="er">&#39;</span>text<span class="op">-</span>green<span class="op">-</span><span class="dv">600</span><span class="er">&#39;</span><span class="op">}&gt;</span></span>
<span id="cb25-77"><a href="#cb25-77" aria-hidden="true" tabindex="-1"></a>                        <span class="op">{</span>transaction<span class="op">.</span><span class="fu">fraudDetected</span> <span class="op">?</span> <span class="er">&#39;</span>Yes<span class="er">&#39;</span> <span class="op">:</span> <span class="er">&#39;</span>No<span class="er">&#39;</span><span class="op">}</span></span>
<span id="cb25-78"><a href="#cb25-78" aria-hidden="true" tabindex="-1"></a>                    <span class="op">&lt;/</span>span<span class="op">&gt;</span></span>
<span id="cb25-79"><a href="#cb25-79" aria-hidden="true" tabindex="-1"></a>                <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb25-80"><a href="#cb25-80" aria-hidden="true" tabindex="-1"></a>            <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb25-81"><a href="#cb25-81" aria-hidden="true" tabindex="-1"></a>        <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb25-82"><a href="#cb25-82" aria-hidden="true" tabindex="-1"></a>    <span class="op">{/</span><span class="cf">if</span><span class="op">}</span></span>
<span id="cb25-83"><a href="#cb25-83" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;/</span>div<span class="op">&gt;</span></span></code></pre></div>
<p>Detail API call call be found in R5.</p>
<h3
id="r9-test-your-services-log-your-services-and-document-your-term-project.">R9
Test your services, log your services, and document your term
project.</h3>
<p>Complete? (Yes/No) Yes</p>
<p>If Yes, briefly describe:</p>
<ol class="incremental" type="1">
<li>what you have done,</li>
<li>what are the new features.</li>
<li>Take some screen to demonstrate the features if applicable.</li>
</ol>
<h4 id="unit-tests">Unit Tests</h4>
<p>All payment solution unit tests can be found at
<project_root>/project/payment-solution. All these tests can be run by
the following command and all test detail logs will be output to
console. But test coverage of this sub-project did not reach 80% due to
limited time frame.</p>
<pre><code>$&gt; cd $FINAL_PROJECT_HOME/project/payment-solution
$&gt; gradle test -i</code></pre>
<p>Test reports can be found at
<project_root>/project/payment-solution/build/reports/tests/test/index.html.</p>
<figure>
<img src="images/unittests_report.png" alt="" style="width: 50%;">
<figcaption>
Figure 27 - Unit Test Report
</figcaption>
</figure>
<p>Mockito is a mocking tool used with JUnit for unit testing in this
application. With regard to Spring Boot applications, Mockito comes in
handy as it gives developer the opportunity to construct and employ mock
objects. That means the class or method which is being examined is
decoupled from its dependencies which is the essence of unit tests. The
main goal of unit tests is to validate a single piece of code in a
dettached manner from the remaining system.</p>
<h3 id="bruno">Bruno</h3>
<p>Under project folder, there is a directory called bruno. This is API
integration test to verify all API endpoint working same as OpenAPI
specation. This folder can directly import into Burno Desktop as
Collection or use Bruno CLI to run invidual script.</p>
<figure>
<img src="images/bruno.png" alt="" style="width: 50%;">
<figcaption>
Figure 28 - Bruno Desktop
</figcaption>
</figure>
<div class="sourceCode" id="cb27"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a># Bruno script code snippet</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>meta <span class="op">{</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  name<span class="op">:</span> Create Success Payment <span class="bu">Request</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  type<span class="op">:</span> http</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  seq<span class="op">:</span> <span class="dv">2</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>post <span class="op">{</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>  url<span class="op">:</span> http<span class="op">:</span><span class="co">//localhost:8080/payment-request</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>  body<span class="op">:</span> json</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>  auth<span class="op">:</span> none</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>headers <span class="op">{</span></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>  Content<span class="op">-</span><span class="bu">Type</span><span class="op">:</span> application<span class="op">/</span>json</span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>  Accept<span class="op">:</span> application<span class="op">/</span>json</span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>  Authorization<span class="op">:</span> Bearer Token <span class="dv">1234567890</span></span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>  X<span class="op">-</span>Api<span class="op">-</span><span class="bu">Key</span><span class="op">:</span> <span class="dv">1234567890</span></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>  X<span class="op">-</span><span class="bu">Notification</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>  <span class="bu">Connection</span><span class="op">:</span> keep<span class="op">-</span>alive</span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>  Keep<span class="op">-</span>Alive<span class="op">:</span> timeout<span class="op">=</span><span class="dv">60</span></span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a>body<span class="op">:</span>json <span class="op">{</span></span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;transactionDatetime&quot;</span><span class="op">:</span> <span class="st">&quot;2024-12-08T15:15:15.265Z&quot;</span><span class="op">,</span></span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;transactionAmount&quot;</span><span class="op">:</span> <span class="dv">146</span><span class="op">,</span></span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;transactionType&quot;</span><span class="op">:</span> <span class="st">&quot;Chip Transaction&quot;</span><span class="op">,</span></span>
<span id="cb27-30"><a href="#cb27-30" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;merchantId&quot;</span><span class="op">:</span> <span class="st">&quot;-112121233619748226&quot;</span><span class="op">,</span></span>
<span id="cb27-31"><a href="#cb27-31" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;merchantCity&quot;</span><span class="op">:</span> <span class="st">&quot;Rome&quot;</span><span class="op">,</span></span>
<span id="cb27-32"><a href="#cb27-32" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;merchantMccCode&quot;</span><span class="op">:</span> <span class="st">&quot;3509&quot;</span><span class="op">,</span></span>
<span id="cb27-33"><a href="#cb27-33" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;cardNumber&quot;</span><span class="op">:</span> <span class="st">&quot;5476407228285230&quot;</span><span class="op">,</span></span>
<span id="cb27-34"><a href="#cb27-34" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;cvvCode&quot;</span><span class="op">:</span> <span class="st">&quot;688&quot;</span><span class="op">,</span></span>
<span id="cb27-35"><a href="#cb27-35" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;cardExpirationDate&quot;</span><span class="op">:</span> <span class="st">&quot;2022-11-01&quot;</span><span class="op">,</span></span>
<span id="cb27-36"><a href="#cb27-36" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;cardHolderFirstName&quot;</span><span class="op">:</span> <span class="st">&quot;Milani&quot;</span><span class="op">,</span></span>
<span id="cb27-37"><a href="#cb27-37" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;cardHolderLastName&quot;</span><span class="op">:</span> <span class="st">&quot;Merkel&quot;</span><span class="op">,</span></span>
<span id="cb27-38"><a href="#cb27-38" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;cardHolderBillingAddress&quot;</span><span class="op">:</span> <span class="st">&quot;Unit 87, 524 Ocean Drive&quot;</span><span class="op">,</span></span>
<span id="cb27-39"><a href="#cb27-39" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;cardHolderBillingCity&quot;</span><span class="op">:</span> <span class="st">&quot;Houston&quot;</span><span class="op">,</span></span>
<span id="cb27-40"><a href="#cb27-40" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;cardHolderBillingState&quot;</span><span class="op">:</span> <span class="st">&quot;TX&quot;</span><span class="op">,</span></span>
<span id="cb27-41"><a href="#cb27-41" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;cardHolderBillingZip&quot;</span><span class="op">:</span> <span class="st">&quot;77056&quot;</span><span class="op">,</span></span>
<span id="cb27-42"><a href="#cb27-42" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;cardHolderBillingCountry&quot;</span><span class="op">:</span> <span class="st">&quot;United States&quot;</span></span>
<span id="cb27-43"><a href="#cb27-43" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb27-44"><a href="#cb27-44" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb27-45"><a href="#cb27-45" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 id="logging">Logging</h4>
<p>For this project robust and structured logging framework is used
which is a part of Spring Boot and uses the SLF4J with Logback as its
default implementation. The application has seamless integration of
different components that permit visibility in the application
activities which include handling messages, processing payment requests
and fraud detection. The logger is employed to monitor events such as
the persistence of the transaction data, fraud detection result values
from querying the ONNX model, and the status of notifications that were
sent to users. The interactions at the debug level such as saving of
transactions and the states of operations are captured while error-level
loggers oversee the exceptions raised to ensure prompt diagnosis of
issues. All the logs and configurations are stored in a central
configuration to allow for easy changing of log levels, and output
formats of either file-based or console to cater for various deployment
environments. Such an approach aids in effective debugging while still
in the development mode or provides useful detailed information for
monitoring while in production.</p>
<p>Here is the default logging setting in this SpringBoot sub-project.
These setting can be override using environment variable if necessary.
In this application, logger was not used everywhere is the application.
It was just used to troubleshoot API troubleshooting.</p>
<div class="sourceCode" id="cb28"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a># src<span class="op">/</span>main<span class="op">/</span>resources<span class="op">/</span>application<span class="op">-</span>dev<span class="op">.</span><span class="fu">yml</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="kw">...</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>logging<span class="op">:</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  level<span class="op">:</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    root<span class="op">:</span> DEBUG</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>    cp630oc<span class="op">.</span><span class="fu">paymentsolution</span><span class="op">:</span> DEBUG</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>    org<span class="op">.</span><span class="fu">springframework</span><span class="op">:</span> INFO</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>    org<span class="op">.</span><span class="fu">hibernate</span><span class="op">:</span> ERROR</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>    com<span class="op">.</span><span class="fu">zaxxer</span><span class="op">.</span><span class="fu">hikari</span><span class="op">:</span> ERROR</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>    org<span class="op">.</span><span class="fu">postgresql</span><span class="op">:</span> ERROR</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>    org<span class="op">.</span><span class="fu">apache</span><span class="op">.</span><span class="fu">catalina</span><span class="op">.</span><span class="fu">core</span><span class="op">.</span><span class="fu">AprLifecycleListener</span><span class="op">:</span> ERROR</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>    org<span class="op">.</span><span class="fu">apache</span><span class="op">.</span><span class="fu">tomcat</span><span class="op">.</span><span class="fu">util</span><span class="op">.</span><span class="fu">compat</span><span class="op">.</span><span class="fu">Jre18Compat</span><span class="op">:</span> ERROR</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>    org<span class="op">.</span><span class="fu">apache</span><span class="op">.</span><span class="fu">tomcat</span><span class="op">.</span><span class="fu">util</span><span class="op">.</span><span class="fu">compat</span><span class="op">.</span><span class="fu">Jre19Compat</span><span class="op">:</span> ERROR</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>    org<span class="op">.</span><span class="fu">apache</span><span class="op">.</span><span class="fu">tomcat</span><span class="op">.</span><span class="fu">util</span><span class="op">.</span><span class="fu">compat</span><span class="op">.</span><span class="fu">Jre21Compat</span><span class="op">:</span> ERROR</span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>    org<span class="op">.</span><span class="fu">apache</span><span class="op">.</span><span class="fu">tomcat</span><span class="op">.</span><span class="fu">util</span><span class="op">.</span><span class="fu">compat</span><span class="op">.</span><span class="fu">Jre22Compat</span><span class="op">:</span> ERROR</span></code></pre></div>
<h4 id="javadoc">Javadoc</h4>
<p>After running “gradle clean build”, javadoc task will generate all
javadoc under
<project_root>/project/payment-solution/build/docs/javadoc. Open
<project_root>/project/payment-solution/build/docs/javadoc/index.html to
view all detail class documents.</p>
<figure>
<img src="images/javadoc_index.png" alt="" style="width: 50%;">
<figcaption>
Figure 29 -Javadoc Index Page
</figcaption>
</figure>
<h3
id="r10-demonstrate-your-term-project-in-final-project-presentation-slides-short-video.">R10
Demonstrate your term project in final project presentation, slides,
short video.</h3>
<p>Complete? (Yes/No)</p>
<p>If Yes, briefly describe:</p>
<ol class="incremental" type="1">
<li>what you have done,</li>
<li>what are the new features.</li>
<li>Take some screen to demonstrate the features if applicable.</li>
</ol>
<p><strong>References</strong></p>
<ol class="incremental" type="1">
<li>CP630OC project</li>
<li>Agarwal, A., &amp; Gupta, N. (2021, Jun 16). Comparison of Outlier
Detection Techniques for Structured Data. doi:2106. ?</li>
<li>Altman, E. (2019). Synthesizing Credit Card Transactions. PsyArXiv.
https://arxiv.org/pdf/1910.03033</li>
<li>Altman, E. (2019). Credit Card Transactions [Data set].
Kaggle. https://www.kaggle.com/datasets/ealtman2019/credit-card-transactions/data</li>
<li>BPMN. (n.d.). Object Management Group Inc. Accessed October 14,
2024. https://www.bpmn.org/</li>
<li>Brown, S. (2023). The C4 Model For Visualising Software
Architecture. <em>Leanpub</em>.
https://leanpub.com/visualising-software-architecture</li>
<li>Du, H. et al. (2023). AutoEncoder and LightGBM for Credit Card Fraud
Detection Problems. <em>Symmetry</em> 2023, 15, 870.
https://doi.org/10.3390/sym15040870</li>
<li>Huang, K. (2020). An Optimized LightGBM Model for Fraud Detection.
Journal of Physics: Conference Series, 1651, 012111, IOP Publishing.
https://doi.org/10.1088/1742-6596/1651/1/012111</li>
<li>Option Consommateurs. (April 17, 2024). 30% of Canadians victims of
bank fraud. Accessed October 14, 2024.
https://option-consommateurs.org/en/communique-barometre-2024/</li>
<li>Speiser, J. L. (2021). A random forest method with feature selection
for developing medical prediction models with clustered and longitudinal
data. Journal of Biomedical Informatics, 117.
doi:10.1016/j.jbi.2021.103763</li>
<li>Turkey, J. (1997). Exploratory Data Analysis. Addison-Wesley. ISBN
978-0-201-07616-5.</li>
</ol>
