openapi: '3.0.3'
info:
  title: Payment Solution API
  version: '1.0'
servers:
  - url: http://localhost:8080
paths:
  /payment-request:
    post:
      tags:
        - PaymentRequest
      operationId: createPaymentRequest
      summary: Create a payment request
      parameters:
        - name: X-Authorization
          in: header
          required: false
          description: Authorization token
          schema:
            type: string
        - name: X-Api-Key
          in: header
          required: false
          description: API key for authentication
          schema:
            type: string
        - name: X-Notification
          in: header
          required: false
          description: Notification header for additional context
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePaymentRequestRequest'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreatePaymentRequestResponse'
              example:
                transactionId: "123e4567-e89b-12d3-a456-426614174000"
                transactionTimestamp: "2024-12-06T03:18:00Z"
                transactionStatus: "APPROVED"
        '400':
          description: Bad Request
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetail'
        '500':
          description: Internal Server Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ProblemDetail'
components:
  schemas:
    CreatePaymentRequestRequest:
      type: object
      required:
        - transactionDatetime
        - transactionAmount
        - transactionType
        - merchantId
        - cardNumber
        - cvvCode
      properties:
        transactionDatetime:
          type: string
          format: date-time
          description: Date and time of the transaction
        transactionAmount:
          type: number
          format: float
          description: Amount of the transaction
        transactionType:
          type: string
          description: Type of transaction (e.g., purchase, refund)
        merchantId:
          type: string
          description: Unique identifier for the merchant
        merchantCity:
          type: string
          description: City where the merchant is located
        merchantState:
          type: string
          description: State where the merchant is located
        merchantZip:
          type: string
          description: ZIP code of the merchant location
        merchantMccCode:
          type: string
          description: Merchant Category Code (MCC)
        cardNumber:
          type: string
          pattern: '^\d{16}$'
          description: 16-digit credit card number
        cvvCode:
          type: string
          pattern: '^\d{3,4}$'
          description: Card verification value (CVV)
        cardExpirationDate:
          type: string
          format: date
          description: Card expiration date
        cardHolderFirstName:
          type: string
          description: First name of the cardholder
        cardHolderLastName:
          type: string
          description: Last name of the cardholder
        cardHolderBillingAddress:
          type: string
          description: Billing address of the cardholder
        cardHolderBillingCity:
          type: string
          description: City where the cardholder is billed
        cardHolderBillingState:
          type: string
          description: State where the cardholder is billed
        cardHolderBillingZip:
          type: string
          description: ZIP code of the cardholder billing location
        cardHolderBillingCountry: 
          type: string
          description: Country where the cardholder is billed

    CreatePaymentRequestResponse:
      type: object
      properties:
        transactionId:
          type: string
          description: Unique identifier for the transaction
        transactionTimestamp:
          type: string
          format: date-time
          description: Date and time of the transaction
        transactionError:
          type: string
          description: Error message if the transaction failed  
        fraudDetected:
          type: boolean
          description: Indicates if fraud was detected
        transactionStatus:
          type: string
          description: Status of the transaction (e.g., approved, declined)

    ProblemDetail:
      type: object
      properties:
        type:
          type: string
          description: URI of the problem type
        title:
          type: string
          description: Short description of the problem
        status:
          type: integer
          description: HTTP status code
        detail:
          type: string
          description: Detailed description of the problem
        instance:
          type: string
          description: URI of the specific occurrence of the problem